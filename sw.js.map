{"version":3,"sources":["webpack:///sw.js","webpack:///webpack/bootstrap 384e5cb96e2e5890a4b2","webpack:///./~/firebase/messaging/models/errors.js","webpack:///./~/firebase/app/errors.js","webpack:///./~/firebase/app.js","webpack:///./~/firebase/app/shared_promise.js","webpack:///./~/firebase/app/subscribe.js","webpack:///./~/firebase/messaging/controllers/controller-interface.js","webpack:///./~/firebase/messaging/models/fcm-details.js","webpack:///./~/firebase/messaging/models/notification-permission.js","webpack:///./~/firebase/messaging/models/worker-page-message.js","webpack:///(webpack)/buildin/global.js","webpack:///./~/firebase/messaging.js","webpack:///./assets/js/sw.js","webpack:///./~/firebase/app/deep_copy.js","webpack:///./~/firebase/app/firebase_app.js","webpack:///./~/firebase/messaging/controllers/sw-controller.js","webpack:///./~/firebase/messaging/controllers/window-controller.js","webpack:///./~/firebase/messaging/helpers/array-buffer-to-base64.js","webpack:///./~/firebase/messaging/models/default-sw.js","webpack:///./~/firebase/messaging/models/token-manager.js","webpack:///./~/process/browser.js","webpack:///./~/promise-polyfill/promise.js","webpack:///./~/setimmediate/setImmediate.js","webpack:///./~/timers-browserify/main.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_defineProperty","obj","key","writable","_ERROR_MAP","CODES","AVAILABLE_IN_WINDOW","AVAILABLE_IN_SW","SHOULD_BE_INHERITED","BAD_SENDER_ID","INCORRECT_GCM_SENDER_ID","PERMISSION_DEFAULT","PERMISSION_BLOCKED","UNSUPPORTED_BROWSER","NOTIFICATIONS_BLOCKED","FAILED_DEFAULT_REGISTRATION","SW_REGISTRATION_EXPECTED","GET_SUBSCRIPTION_FAILED","INVALID_SAVED_TOKEN","SW_REG_REDUNDANT","TOKEN_SUBSCRIBE_FAILED","TOKEN_SUBSCRIBE_NO_TOKEN","TOKEN_SUBSCRIBE_NO_PUSH_SET","USE_SW_BEFORE_GET_TOKEN","INVALID_DELETE_TOKEN","DELETE_TOKEN_NOT_FOUND","DELETE_SCOPE_NOT_FOUND","BG_HANDLER_FUNCTION_EXPECTED","NO_WINDOW_CLIENT_TO_MSG","UNABLE_TO_RESUBSCRIBE","NO_FCM_TOKEN_FOR_RESUBSCRIBE","FAILED_TO_DELETE_TOKEN","NO_SW_IN_REG","BAD_SCOPE","BAD_VAPID_KEY","BAD_SUBSCRIPTION","BAD_TOKEN","BAD_PUSH_SET","FAILED_DELETE_VAPID_KEY","ERROR_MAP","default","codes","map","_classCallCheck","instance","Constructor","TypeError","patchCapture","captureFake","result","captureStackTrace","_createClass","defineProperties","target","props","length","descriptor","protoProps","staticProps","Error","FirebaseError","code","message","this","ErrorFactory","create","err","apply","arguments","stack","constructor","service","serviceName","errors","pattern","data","undefined","template","fullCode","replace","match","toString","prop","slice","_firebase_app","firebase","createFirebaseNamespace","global","scope","self","Function","e","PromiseImpl","Promise","local","GoogPromise","createSubscribe","executor","onNoObservers","proxy","ObserverProxy","subscribe","bind","async","fn","onError","_len","args","Array","_key","LocalPromise","resolve","then","catch","error","implementsAnyMethods","methods","_typeof","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","method","return","noop","_typeof2","_shared_promise","_this","observers","unsubscribes","observerCount","task","finalized","forEachObserver","observer","_error","close","complete","nextOrObserver","_this2","unsub","unsubscribeOne","finalError","push","sendOne","_this3","console","_this4","_interopRequireDefault","_errors","_errors2","_errors3","_tokenManager","_tokenManager2","_notificationPermission","_notificationPermission2","SENDER_ID_OPTION_NAME","ControllerInterface","app","errorFactory_","options","messagingSenderId_","tokenManager_","INTERNAL","delete","currentPermission","getNotificationPermission_","granted","denied","reject","getSWRegistration_","registration","getSavedToken","token","createToken","deleteToken","pushManager","getSubscription","subscription","unsubscribe","closeDatabase","Notification","permission","FCM_APPLICATION_SERVER_KEY","SUBSCRIPTION_DETAILS","userVisibleOnly","applicationServerKey","Uint8Array","ENDPOINT","APPLICATION_SERVER_KEY","SUBSCRIPTION_OPTIONS","PARAMS","TYPE_OF_MSG","DATA","msgType","PUSH_MSG_RECEIVED","NOTIFICATION_CLICKED","createNewMsg","msgData","_message","TYPES_OF_MSG","g","eval","window","registerMessaging","registerService","_swController2","_windowController2","Messaging","_windowController","_swController","_app","_app2","initializeApp","messagingSenderId","messaging","setBackgroundMessageHandler","payload","showNotification","notification","title","icon","body","notifications","vibrate","addEventListener","event","waitUntil","clients","matchAll","type","client","focus","openWindow","deepCopy","deepExtend","source","Date","getTime","patchProperty","DEFAULT_ENTRY_NAME","apps_","getApps","keys","callAppHooks","eventName","factories","forEach","factoryName","useAsService","appHooks","namespace","FirebaseAppImpl","apps","SDK_VERSION","createService","serviceProperties","appHook","allowMultipleInstances","serviceNamespace","appArg","_deep_copy","serviceFxn","_getService","extendNamespace","_subscribe","removeApp","appErrors","tokenListeners","firebase_","isDeleted_","services_","name_","options_","checkDestroyed_","services","serviceKey","instanceKey","all","instanceIdentifier","instanceSpecifier","extendApp","addAuthTokenListener","listener","getUid","getToken","callback","setTimeout","removeAuthTokenListener","filter","log","no-app","bad-app-name","duplicate-app","app-deleted","duplicate-service","sa-not-supported","invalid-app-argument","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","setPrototypeOf","__proto__","_controllerInterface","_controllerInterface2","_workerPageMessage","_workerPageMessage2","_fcmDetails","_fcmDetails2","SWController","_ControllerInterface","getPrototypeOf","onPush_","onSubChange_","onNotificationClick_","bgMessageHandler_","msgPayload","json","handleMsgPromise","hasVisibleClients_","hasVisibleClients","sendMessageToWindowClients_","notificationDetails","getNotificationData_","notificationTitle","promiseChain","tokenDetails","tokenManager","getTokenManager","getTokenDetailsFromToken","details","newSubscription","subscribeToFCM","fcmSenderId","fcmPushSet","fcmToken","stopImmediatePropagation","clickAction","getWindowClient_","windowClient","internalMsg","attemptToMessageClient_","notificationInformation","assign","url","parsedURL","URL","href","includeUncontrolled","clientList","suitableClient","_this5","postMessage","some","visibilityState","_this6","_get","receiver","desc","getOwnPropertyDescriptor","parent","_defaultSw","_defaultSw2","WindowController","registrationToUse_","manifestCheckPromise_","messageObserver_","onMessage_","tokenRefreshObserver_","onTokenRefresh_","setupSWMessageListener_","isSupported_","manifestCheck_","manifestTag","document","querySelector","fetch","response","manifestContent","managePermissionResult","permissionPromise","requestPermission","ServiceWorkerRegistration","optError","optCompleted","serviceWorker","installing","waiting","active","state","stateChangeListener","removeEventListener","waitForRegistrationToActivate_","navigator","register","path","browserErrorMessage","update","_this7","workerPageMessage","pushMessage","PushSubscription","toBase64","arrayBuffer","uint8Version","btoa","String","fromCharCode","_arrayBufferToBase","_arrayBufferToBase2","FCM_TOKEN_OBJ_STORE","TokenManager","openDbPromise_","request","indexedDB","open","onerror","onsuccess","onupgradeneeded","db","objectStore","createObjectStore","keyPath","createIndex","unique","openDatabase_","transaction","index","swScope","scopeRequest","senderId","senderIdTokens","cursorRequest","openCursor","cursor","continue","pushSet","p256dh","auth","fcmSubscribeBody","endpoint","headers","Headers","append","subscribeOptions","fcmTokenResponse","masterTokenDetails","swRegistration","put","getAllTokenDetailsForSenderId_","allTokenDetails","findIndex","isSameSubscription_","fcmTokenDetails","sub","saveTokenDetails_","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","timeout","len","run","Item","array","process","nextTick","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","setImmediate","root","thisArg","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","cb","onFulfilled","onRejected","promise","ret","newValue","finale","_unhandledRejectionFn","Handler","reason","ex","setTimeoutFunc","prom","arr","res","val","remaining","race","values","warn","_setImmediateFn","_setUnhandledRejectionFn","tasksByHandle","nextHandle","registerImmediate","clearImmediate","runIfPresent","currentlyRunningATask","doc","attachTo","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","messagePrefix","Math","random","onGlobalMessage","indexOf","attachEvent","MessageChannel","channel","port1","port2","createElement","html","documentElement","script","onreadystatechange","removeChild","appendChild","Timeout","id","clearFn","_id","_clearFn","setInterval","clearInterval","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout"],"mappings":"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","file":"sw.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/2017/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 11);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _ERROR_MAP;\n\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });\n    } else {\n        obj[key] = value;\n    }return obj;\n}\n\nvar CODES = {\n    AVAILABLE_IN_WINDOW: 'only-available-in-window',\n    AVAILABLE_IN_SW: 'only-available-in-sw',\n    SHOULD_BE_INHERITED: 'should-be-overriden',\n    BAD_SENDER_ID: 'bad-sender-id',\n    INCORRECT_GCM_SENDER_ID: 'incorrect-gcm-sender-id',\n    PERMISSION_DEFAULT: 'permission-default',\n    PERMISSION_BLOCKED: 'permission-blocked',\n    UNSUPPORTED_BROWSER: 'unsupported-browser',\n    NOTIFICATIONS_BLOCKED: 'notifications-blocked',\n    FAILED_DEFAULT_REGISTRATION: 'failed-serviceworker-registration',\n    SW_REGISTRATION_EXPECTED: 'sw-registration-expected',\n    GET_SUBSCRIPTION_FAILED: 'get-subscription-failed',\n    INVALID_SAVED_TOKEN: 'invalid-saved-token',\n    SW_REG_REDUNDANT: 'sw-reg-redundant',\n    TOKEN_SUBSCRIBE_FAILED: 'token-subscribe-failed',\n    TOKEN_SUBSCRIBE_NO_TOKEN: 'token-subscribe-no-token',\n    TOKEN_SUBSCRIBE_NO_PUSH_SET: 'token-subscribe-no-push-set',\n    USE_SW_BEFORE_GET_TOKEN: 'use-sw-before-get-token',\n    INVALID_DELETE_TOKEN: 'invalid-delete-token',\n    DELETE_TOKEN_NOT_FOUND: 'delete-token-not-found',\n    DELETE_SCOPE_NOT_FOUND: 'delete-scope-not-found',\n    BG_HANDLER_FUNCTION_EXPECTED: 'bg-handler-function-expected',\n    NO_WINDOW_CLIENT_TO_MSG: 'no-window-client-to-msg',\n    UNABLE_TO_RESUBSCRIBE: 'unable-to-resubscribe',\n    NO_FCM_TOKEN_FOR_RESUBSCRIBE: 'no-fcm-token-for-resubscribe',\n    FAILED_TO_DELETE_TOKEN: 'failed-to-delete-token',\n    NO_SW_IN_REG: 'no-sw-in-reg',\n    BAD_SCOPE: 'bad-scope',\n    BAD_VAPID_KEY: 'bad-vapid-key',\n    BAD_SUBSCRIPTION: 'bad-subscription',\n    BAD_TOKEN: 'bad-token',\n    BAD_PUSH_SET: 'bad-push-set',\n    FAILED_DELETE_VAPID_KEY: 'failed-delete-vapid-key'\n};\nvar ERROR_MAP = (_ERROR_MAP = {}, _defineProperty(_ERROR_MAP, CODES.AVAILABLE_IN_WINDOW, 'This method is available in a Window context.'), _defineProperty(_ERROR_MAP, CODES.AVAILABLE_IN_SW, 'This method is available in a service worker ' + 'context.'), _defineProperty(_ERROR_MAP, CODES.SHOULD_BE_INHERITED, 'This method should be overriden by ' + 'extended classes.'), _defineProperty(_ERROR_MAP, CODES.BAD_SENDER_ID, 'Please ensure that \\'messagingSenderId\\' is set ' + 'correctly in the options passed into firebase.initializeApp().'), _defineProperty(_ERROR_MAP, CODES.PERMISSION_DEFAULT, 'The required permissions were not granted and ' + 'dismissed instead.'), _defineProperty(_ERROR_MAP, CODES.PERMISSION_BLOCKED, 'The required permissions were not granted and ' + 'blocked instead.'), _defineProperty(_ERROR_MAP, CODES.UNSUPPORTED_BROWSER, 'This browser doesn\\'t support the API\\'s ' + 'required to use the firebase SDK.'), _defineProperty(_ERROR_MAP, CODES.NOTIFICATIONS_BLOCKED, 'Notifications have been blocked.'), _defineProperty(_ERROR_MAP, CODES.FAILED_DEFAULT_REGISTRATION, 'We are unable to register the ' + 'default service worker. {$browserErrorMessage}'), _defineProperty(_ERROR_MAP, CODES.SW_REGISTRATION_EXPECTED, 'A service worker registration was the ' + 'expected input.'), _defineProperty(_ERROR_MAP, CODES.GET_SUBSCRIPTION_FAILED, 'There was an error when trying to get ' + 'any existing Push Subscriptions.'), _defineProperty(_ERROR_MAP, CODES.INVALID_SAVED_TOKEN, 'Unable to access details of the saved token.'), _defineProperty(_ERROR_MAP, CODES.SW_REG_REDUNDANT, 'The service worker being used for push was made ' + 'redundant.'), _defineProperty(_ERROR_MAP, CODES.TOKEN_SUBSCRIBE_FAILED, 'A problem occured while subscribing the ' + 'user to FCM: {$message}'), _defineProperty(_ERROR_MAP, CODES.TOKEN_SUBSCRIBE_NO_TOKEN, 'FCM returned no token when subscribing ' + 'the user to push.'), _defineProperty(_ERROR_MAP, CODES.TOKEN_SUBSCRIBE_NO_PUSH_SET, 'FCM returned an invalid response ' + 'when getting an FCM token.'), _defineProperty(_ERROR_MAP, CODES.USE_SW_BEFORE_GET_TOKEN, 'You must call useServiceWorker() before ' + 'calling getToken() to ensure your service worker is used.'), _defineProperty(_ERROR_MAP, CODES.INVALID_DELETE_TOKEN, 'You must pass a valid token into ' + 'deleteToken(), i.e. the token from getToken().'), _defineProperty(_ERROR_MAP, CODES.DELETE_TOKEN_NOT_FOUND, 'The deletion attempt for token could not ' + 'be performed as the token was not found.'), _defineProperty(_ERROR_MAP, CODES.DELETE_SCOPE_NOT_FOUND, 'The deletion attempt for service worker ' + 'scope could not be performed as the scope was not found.'), _defineProperty(_ERROR_MAP, CODES.BG_HANDLER_FUNCTION_EXPECTED, 'The input to ' + 'setBackgroundMessageHandler() must be a function.'), _defineProperty(_ERROR_MAP, CODES.NO_WINDOW_CLIENT_TO_MSG, 'An attempt was made to message a ' + 'non-existant window client.'), _defineProperty(_ERROR_MAP, CODES.UNABLE_TO_RESUBSCRIBE, 'There was an error while re-subscribing ' + 'the FCM token for push messaging. Will have to resubscribe the ' + 'user on next visit. {$message}'), _defineProperty(_ERROR_MAP, CODES.NO_FCM_TOKEN_FOR_RESUBSCRIBE, 'Could not find an FCM token ' + 'and as a result, unable to resubscribe. Will have to resubscribe the ' + 'user on next visit.'), _defineProperty(_ERROR_MAP, CODES.FAILED_TO_DELETE_TOKEN, 'Unable to delete the currently saved token.'), _defineProperty(_ERROR_MAP, CODES.NO_SW_IN_REG, 'Even though the service worker registration was ' + 'successful, there was a problem accessing the service worker itself.'), _defineProperty(_ERROR_MAP, CODES.INCORRECT_GCM_SENDER_ID, 'Please change your web app manifest\\'s ' + '\\'gcm_sender_id\\' value to \\'103953800507\\' to use Firebase messaging.'), _defineProperty(_ERROR_MAP, CODES.BAD_SCOPE, 'The service worker scope must be a string with at ' + 'least one character.'), _defineProperty(_ERROR_MAP, CODES.BAD_VAPID_KEY, 'The public VAPID key must be a string with at ' + 'least one character.'), _defineProperty(_ERROR_MAP, CODES.BAD_SUBSCRIPTION, 'The subscription must be a valid ' + 'PushSubscription.'), _defineProperty(_ERROR_MAP, CODES.BAD_TOKEN, 'The FCM Token used for storage / lookup was not ' + 'a valid token string.'), _defineProperty(_ERROR_MAP, CODES.BAD_PUSH_SET, 'The FCM push set used for storage / lookup was not ' + 'not a valid push set string.'), _defineProperty(_ERROR_MAP, CODES.FAILED_DELETE_VAPID_KEY, 'The VAPID key could not be deleted.'), _ERROR_MAP);\nexports.default = {\n    codes: CODES,\n    map: ERROR_MAP\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=errors.js.map\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () {\n    function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n    };\n}();\n\nexports.patchCapture = patchCapture;\n\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n\nvar ERROR_NAME = 'FirebaseError';\nvar captureStackTrace = Error.captureStackTrace;\n// Export for faking in tests\nfunction patchCapture(captureFake) {\n    var result = captureStackTrace;\n    captureStackTrace = captureFake;\n    return result;\n}\n\nvar FirebaseError = exports.FirebaseError = function FirebaseError(code, message) {\n    _classCallCheck(this, FirebaseError);\n\n    this.code = code;\n    this.message = message;\n\n    // We want the stack value, if implemented by Error\n    if (captureStackTrace) {\n        // Patches this.stack, omitted calls above ErrorFactory#create\n        captureStackTrace(this, ErrorFactory.prototype.create);\n    } else {\n        var err = Error.apply(this, arguments);\n        this.name = ERROR_NAME;\n        // Make non-enumerable getter for the property.\n        Object.defineProperty(this, 'stack', {\n            get: function get() {\n                return err.stack;\n            }\n        });\n    }\n};\n// Back-door inheritance\n\n\nFirebaseError.prototype = Object.create(Error.prototype);\nFirebaseError.prototype.constructor = FirebaseError;\nFirebaseError.prototype.name = ERROR_NAME;\n\nvar ErrorFactory = exports.ErrorFactory = function () {\n    function ErrorFactory(service, serviceName, errors) {\n        _classCallCheck(this, ErrorFactory);\n\n        this.service = service;\n        this.serviceName = serviceName;\n        this.errors = errors;\n        // Matches {$name}, by default.\n        this.pattern = /\\{\\$([^}]+)}/g;\n        // empty\n    }\n\n    _createClass(ErrorFactory, [{\n        key: 'create',\n        value: function create(code, data) {\n            if (data === undefined) {\n                data = {};\n            }\n            var template = this.errors[code];\n            var fullCode = this.service + '/' + code;\n            var message = void 0;\n            if (template === undefined) {\n                message = \"Error\";\n            } else {\n                message = template.replace(this.pattern, function (match, key) {\n                    var value = data[key];\n                    return value !== undefined ? value.toString() : '<' + key + '?>';\n                });\n            }\n            // Service: Error message (service/code).\n            message = this.serviceName + ': ' + message + ' (' + fullCode + ').';\n            var err = new FirebaseError(fullCode, message);\n            // Populate the Error object with message parts for programmatic\n            // accesses (e.g., e.file).\n            for (var prop in data) {\n                if (!data.hasOwnProperty(prop) || prop.slice(-1) === '_') {\n                    continue;\n                }\n                err[prop] = data[prop];\n            }\n            return err;\n        }\n    }]);\n\n    return ErrorFactory;\n}();\n//# sourceMappingURL=errors.js.map\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n\n\nObject.defineProperty(exports, \"__esModule\", {\n                                                             value: true\n});\n\nvar _firebase_app = __webpack_require__(13);\n\n// Export a single instance of firebase app\nvar firebase = (0, _firebase_app.createFirebaseNamespace)(); /**\n                                                             * Copyright 2017 Google Inc.\n                                                             *\n                                                             * Licensed under the Apache License, Version 2.0 (the \"License\");\n                                                             * you may not use this file except in compliance with the License.\n                                                             * You may obtain a copy of the License at\n                                                             *\n                                                             *   http://www.apache.org/licenses/LICENSE-2.0\n                                                             *\n                                                             * Unless required by applicable law or agreed to in writing, software\n                                                             * distributed under the License is distributed on an \"AS IS\" BASIS,\n                                                             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n                                                             * See the License for the specific language governing permissions and\n                                                             * limitations under the License.\n                                                             */\n// Import the createFirebaseNamespace function\nexports.default = firebase;\nmodule.exports = exports['default'];\n//# sourceMappingURL=app.js.map\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\nvar scope = void 0;\nif (typeof global !== 'undefined') {\n    scope = global;\n} else if (typeof self !== 'undefined') {\n    scope = self;\n} else {\n    try {\n        scope = Function('return this')();\n    } catch (e) {\n        throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n}\nvar PromiseImpl = scope.Promise || __webpack_require__(20);\nvar local = exports.local = {\n    Promise: PromiseImpl,\n    GoogPromise: PromiseImpl\n};\n//# sourceMappingURL=shared_promise.js.map\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n\n\nvar _typeof2 = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\" ? function (obj) {\n    return typeof obj === \"undefined\" ? \"undefined\" : _typeof2(obj);\n} : function (obj) {\n    return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof2(obj);\n};\n\nvar _createClass = function () {\n    function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n    };\n}();\n\nexports.createSubscribe = createSubscribe;\nexports.async = async;\n\nvar _shared_promise = __webpack_require__(3);\n\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n\nvar LocalPromise = _shared_promise.local.Promise;\n/**\n * Helper to make a Subscribe function (just like Promise helps make a\n * Thenable).\n *\n * @param executor Function which can make calls to a single Observer\n *     as a proxy.\n * @param onNoObservers Callback when count of Observers goes to zero.\n */\nfunction createSubscribe(executor, onNoObservers) {\n    var proxy = new ObserverProxy(executor, onNoObservers);\n    return proxy.subscribe.bind(proxy);\n}\n/**\n * Implement fan-out for any number of Observers attached via a subscribe\n * function.\n */\n\nvar ObserverProxy = function () {\n    /**\n     * @param executor Function which can make calls to a single Observer\n     *     as a proxy.\n     * @param onNoObservers Callback when count of Observers goes to zero.\n     */\n    function ObserverProxy(executor, onNoObservers) {\n        var _this = this;\n\n        _classCallCheck(this, ObserverProxy);\n\n        this.observers = [];\n        this.unsubscribes = [];\n        this.observerCount = 0;\n        // Micro-task scheduling by calling task.then().\n        this.task = LocalPromise.resolve();\n        this.finalized = false;\n        this.onNoObservers = onNoObservers;\n        // Call the executor asynchronously so subscribers that are called\n        // synchronously after the creation of the subscribe function\n        // can still receive the very first value generated in the executor.\n        this.task.then(function () {\n            executor(_this);\n        }).catch(function (e) {\n            _this.error(e);\n        });\n    }\n\n    _createClass(ObserverProxy, [{\n        key: 'next',\n        value: function next(value) {\n            this.forEachObserver(function (observer) {\n                observer.next(value);\n            });\n        }\n    }, {\n        key: 'error',\n        value: function error(_error) {\n            this.forEachObserver(function (observer) {\n                observer.error(_error);\n            });\n            this.close(_error);\n        }\n    }, {\n        key: 'complete',\n        value: function complete() {\n            this.forEachObserver(function (observer) {\n                observer.complete();\n            });\n            this.close();\n        }\n        /**\n         * Subscribe function that can be used to add an Observer to the fan-out list.\n         *\n         * - We require that no event is sent to a subscriber sychronously to their\n         *   call to subscribe().\n         */\n\n    }, {\n        key: 'subscribe',\n        value: function subscribe(nextOrObserver, error, complete) {\n            var _this2 = this;\n\n            var observer = void 0;\n            if (nextOrObserver === undefined && error === undefined && complete === undefined) {\n                throw new Error(\"Missing Observer.\");\n            }\n            // Assemble an Observer object when passed as callback functions.\n            if (implementsAnyMethods(nextOrObserver, ['next', 'error', 'complete'])) {\n                observer = nextOrObserver;\n            } else {\n                observer = {\n                    next: nextOrObserver,\n                    error: error,\n                    complete: complete\n                };\n            }\n            if (observer.next === undefined) {\n                observer.next = noop;\n            }\n            if (observer.error === undefined) {\n                observer.error = noop;\n            }\n            if (observer.complete === undefined) {\n                observer.complete = noop;\n            }\n            var unsub = this.unsubscribeOne.bind(this, this.observers.length);\n            // Attempt to subscribe to a terminated Observable - we\n            // just respond to the Observer with the final error or complete\n            // event.\n            if (this.finalized) {\n                this.task.then(function () {\n                    try {\n                        if (_this2.finalError) {\n                            observer.error(_this2.finalError);\n                        } else {\n                            observer.complete();\n                        }\n                    } catch (e) {\n                        // nothing\n                    }\n                });\n            }\n            this.observers.push(observer);\n            return unsub;\n        }\n        // Unsubscribe is synchronous - we guarantee that no events are sent to\n        // any unsubscribed Observer.\n\n    }, {\n        key: 'unsubscribeOne',\n        value: function unsubscribeOne(i) {\n            if (this.observers === undefined || this.observers[i] === undefined) {\n                return;\n            }\n            delete this.observers[i];\n            this.observerCount -= 1;\n            if (this.observerCount === 0 && this.onNoObservers !== undefined) {\n                this.onNoObservers(this);\n            }\n        }\n    }, {\n        key: 'forEachObserver',\n        value: function forEachObserver(fn) {\n            if (this.finalized) {\n                // Already closed by previous event....just eat the additional values.\n                return;\n            }\n            // Since sendOne calls asynchronously - there is no chance that\n            // this.observers will become undefined.\n            for (var i = 0; i < this.observers.length; i++) {\n                this.sendOne(i, fn);\n            }\n        }\n        // Call the Observer via one of it's callback function. We are careful to\n        // confirm that the observe has not been unsubscribed since this asynchronous\n        // function had been queued.\n\n    }, {\n        key: 'sendOne',\n        value: function sendOne(i, fn) {\n            var _this3 = this;\n\n            // Execute the callback asynchronously\n            this.task.then(function () {\n                if (_this3.observers !== undefined && _this3.observers[i] !== undefined) {\n                    try {\n                        fn(_this3.observers[i]);\n                    } catch (e) {\n                        // Ignore exceptions raised in Observers or missing methods of an\n                        // Observer.\n                        // Log error to console. b/31404806\n                        if (typeof console !== \"undefined\" && console.error) {\n                            console.error(e);\n                        }\n                    }\n                }\n            });\n        }\n    }, {\n        key: 'close',\n        value: function close(err) {\n            var _this4 = this;\n\n            if (this.finalized) {\n                return;\n            }\n            this.finalized = true;\n            if (err !== undefined) {\n                this.finalError = err;\n            }\n            // Proxy is no longer needed - garbage collect references\n            this.task.then(function () {\n                _this4.observers = undefined;\n                _this4.onNoObservers = undefined;\n            });\n        }\n    }]);\n\n    return ObserverProxy;\n}();\n/** Turn synchronous function into one called asynchronously. */\n\nfunction async(fn, onError) {\n    return function () {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        LocalPromise.resolve(true).then(function () {\n            fn.apply(undefined, args);\n        }).catch(function (error) {\n            if (onError) {\n                onError(error);\n            }\n        });\n    };\n}\n/**\n * Return true if the object passed in implements any of the named methods.\n */\nfunction implementsAnyMethods(obj, methods) {\n    if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object' || obj === null) {\n        return false;\n    }\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n        for (var _iterator = methods[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var method = _step.value;\n\n            if (method in obj && typeof obj[method] === 'function') {\n                return true;\n            }\n        }\n    } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n            }\n        } finally {\n            if (_didIteratorError) {\n                throw _iteratorError;\n            }\n        }\n    }\n\n    return false;\n}\nfunction noop() {}\n// do nothing\n\n//# sourceMappingURL=subscribe.js.map\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () {\n    function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n    };\n}();\n\nvar _errors = __webpack_require__(1);\n\nvar _errors2 = __webpack_require__(0);\n\nvar _errors3 = _interopRequireDefault(_errors2);\n\nvar _tokenManager = __webpack_require__(18);\n\nvar _tokenManager2 = _interopRequireDefault(_tokenManager);\n\nvar _notificationPermission = __webpack_require__(7);\n\nvar _notificationPermission2 = _interopRequireDefault(_notificationPermission);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n\nvar SENDER_ID_OPTION_NAME = 'messagingSenderId';\n\nvar ControllerInterface = function () {\n    /**\n     * An interface of the Messaging Service API\n     * @param {!firebase.app.App} app\n     */\n    function ControllerInterface(app) {\n        var _this = this;\n\n        _classCallCheck(this, ControllerInterface);\n\n        this.errorFactory_ = new _errors.ErrorFactory('messaging', 'Messaging', _errors3.default.map);\n        if (!app.options[SENDER_ID_OPTION_NAME] || typeof app.options[SENDER_ID_OPTION_NAME] !== 'string') {\n            throw this.errorFactory_.create(_errors3.default.codes.BAD_SENDER_ID);\n        }\n        this.messagingSenderId_ = app.options[SENDER_ID_OPTION_NAME];\n        this.tokenManager_ = new _tokenManager2.default();\n        this.app = app;\n        this.INTERNAL = {};\n        this.INTERNAL.delete = function () {\n            return _this.delete;\n        };\n    }\n    /**\n     * @export\n     * @return {Promise<string> | Promise<null>} Returns a promise that\n     * resolves to an FCM token.\n     */\n\n    _createClass(ControllerInterface, [{\n        key: 'getToken',\n        value: function getToken() {\n            var _this2 = this;\n\n            // Check with permissions\n            var currentPermission = this.getNotificationPermission_();\n            if (currentPermission !== _notificationPermission2.default.granted) {\n                if (currentPermission === _notificationPermission2.default.denied) {\n                    return Promise.reject(this.errorFactory_.create(_errors3.default.codes.NOTIFICATIONS_BLOCKED));\n                }\n                // We must wait for permission to be granted\n                return Promise.resolve(null);\n            }\n            return this.getSWRegistration_().then(function (registration) {\n                return _this2.tokenManager_.getSavedToken(_this2.messagingSenderId_, registration).then(function (token) {\n                    if (token) {\n                        return token;\n                    }\n                    return _this2.tokenManager_.createToken(_this2.messagingSenderId_, registration);\n                });\n            });\n        }\n        /**\n         * This method deletes tokens that the token manager looks after and then\n         * unregisters the push subscription if it exists.\n         * @export\n         * @param {string} token\n         * @return {Promise<void>}\n         */\n\n    }, {\n        key: 'deleteToken',\n        value: function deleteToken(token) {\n            var _this3 = this;\n\n            return this.tokenManager_.deleteToken(token).then(function () {\n                return _this3.getSWRegistration_().then(function (registration) {\n                    if (registration) {\n                        return registration.pushManager.getSubscription();\n                    }\n                }).then(function (subscription) {\n                    if (subscription) {\n                        return subscription.unsubscribe();\n                    }\n                });\n            });\n        }\n    }, {\n        key: 'getSWRegistration_',\n        value: function getSWRegistration_() {\n            throw this.errorFactory_.create(_errors3.default.codes.SHOULD_BE_INHERITED);\n        }\n        //\n        // The following methods should only be available in the window.\n        //\n\n    }, {\n        key: 'requestPermission',\n        value: function requestPermission() {\n            throw this.errorFactory_.create(_errors3.default.codes.AVAILABLE_IN_WINDOW);\n        }\n        /**\n         * @export\n         * @param {!ServiceWorkerRegistration} registration\n         */\n\n    }, {\n        key: 'useServiceWorker',\n        value: function useServiceWorker() {\n            throw this.errorFactory_.create(_errors3.default.codes.AVAILABLE_IN_WINDOW);\n        }\n        /**\n         * @export\n         * @param {!firebase.Observer|function(*)} nextOrObserver\n         * @param {function(!Error)=} optError\n         * @param {function()=} optCompleted\n         * @return {!function()}\n         */\n\n    }, {\n        key: 'onMessage',\n        value: function onMessage() {\n            throw this.errorFactory_.create(_errors3.default.codes.AVAILABLE_IN_WINDOW);\n        }\n        /**\n         * @export\n         * @param {!firebase.Observer|function()} nextOrObserver An observer object\n         * or a function triggered on token refresh.\n         * @param {function(!Error)=} optError Optional A function\n         * triggered on token refresh error.\n         * @param {function()=} optCompleted Optional function triggered when the\n         * observer is removed.\n         * @return {!function()} The unsubscribe function for the observer.\n         */\n\n    }, {\n        key: 'onTokenRefresh',\n        value: function onTokenRefresh() {\n            throw this.errorFactory_.create(_errors3.default.codes.AVAILABLE_IN_WINDOW);\n        }\n        //\n        // The following methods are used by the service worker only.\n        //\n        /**\n         * @export\n         * @param {function(Object)} callback\n         */\n\n    }, {\n        key: 'setBackgroundMessageHandler',\n        value: function setBackgroundMessageHandler() {\n            throw this.errorFactory_.create(_errors3.default.codes.AVAILABLE_IN_SW);\n        }\n        //\n        // The following methods are used by the service themselves and not exposed\n        // publicly or not expected to be used by developers.\n        //\n        /**\n         * This method is required to adhere to the Firebase interface.\n         * It closes any currently open indexdb database connections.\n         */\n\n    }, {\n        key: 'delete',\n        value: function _delete() {\n            this.tokenManager_.closeDatabase();\n        }\n        /**\n         * Returns the current Notification Permission state.\n         * @private\n         * @return {string} The currenct permission state.\n         */\n\n    }, {\n        key: 'getNotificationPermission_',\n        value: function getNotificationPermission_() {\n            return Notification.permission;\n        }\n        /**\n         * @protected\n         * @returns {TokenManager}\n         */\n\n    }, {\n        key: 'getTokenManager',\n        value: function getTokenManager() {\n            return this.tokenManager_;\n        }\n    }]);\n\n    return ControllerInterface;\n}();\n\nexports.default = ControllerInterface;\nmodule.exports = exports['default'];\n//# sourceMappingURL=controller-interface.js.map\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar FCM_APPLICATION_SERVER_KEY = [0x04, 0x33, 0x94, 0xF7, 0xDF, 0xA1, 0xEB, 0xB1, 0xDC, 0x03, 0xA2, 0x5E, 0x15, 0x71, 0xDB, 0x48, 0xD3, 0x2E, 0xED, 0xED, 0xB2, 0x34, 0xDB, 0xB7, 0x47, 0x3A, 0x0C, 0x8F, 0xC4, 0xCC, 0xE1, 0x6F, 0x3C, 0x8C, 0x84, 0xDF, 0xAB, 0xB6, 0x66, 0x3E, 0xF2, 0x0C, 0xD4, 0x8B, 0xFE, 0xE3, 0xF9, 0x76, 0x2F, 0x14, 0x1C, 0x63, 0x08, 0x6A, 0x6F, 0x2D, 0xB1, 0x1A, 0x95, 0xB0, 0xCE, 0x37, 0xC0, 0x9C, 0x6E];\nvar SUBSCRIPTION_DETAILS = {\n    'userVisibleOnly': true,\n    'applicationServerKey': new Uint8Array(FCM_APPLICATION_SERVER_KEY)\n};\nexports.default = {\n    ENDPOINT: 'https://fcm.googleapis.com',\n    APPLICATION_SERVER_KEY: FCM_APPLICATION_SERVER_KEY,\n    SUBSCRIPTION_OPTIONS: SUBSCRIPTION_DETAILS\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=fcm-details.js.map\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    granted: 'granted',\n    default: 'default',\n    denied: 'denied'\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=notification-permission.js.map\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n// These fields are strings to prevent closure from thinking goog.getMsg\n// should be used to initialise the values\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });\n    } else {\n        obj[key] = value;\n    }return obj;\n}\n\nvar PARAMS = {\n    TYPE_OF_MSG: 'firebase-messaging-msg-type',\n    DATA: 'firebase-messaging-msg-data'\n};\n// This value isn't using the TYPE_OF_MSG short hand as closure\n// expects the variable to be defined via goog.getMsg\nvar msgType = {\n    PUSH_MSG_RECEIVED: 'push-msg-received',\n    NOTIFICATION_CLICKED: 'notification-clicked'\n};\nvar createNewMsg = function createNewMsg(msgType, msgData) {\n    var _message;\n\n    var message = (_message = {}, _defineProperty(_message, PARAMS.TYPE_OF_MSG, msgType), _defineProperty(_message, PARAMS.DATA, msgData), _message);\n    return message;\n};\nexports.default = {\n    PARAMS: PARAMS,\n    TYPES_OF_MSG: msgType,\n    createNewMsg: createNewMsg\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=worker-page-message.js.map\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar g;\n\n// This works in non-strict mode\ng = function () {\n\treturn this;\n}();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif ((typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.registerMessaging = registerMessaging;\n\nvar _windowController = __webpack_require__(15);\n\nvar _windowController2 = _interopRequireDefault(_windowController);\n\nvar _swController = __webpack_require__(14);\n\nvar _swController2 = _interopRequireDefault(_swController);\n\nvar _app = __webpack_require__(2);\n\nvar _app2 = _interopRequireDefault(_app);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction registerMessaging(instance) {\n    instance.INTERNAL.registerService('messaging', function factoryMethod(app) {\n        if (self && 'ServiceWorkerGlobalScope' in self) {\n            return new _swController2.default(app);\n        }\n        // Assume we are in the window context.\n        return new _windowController2.default(app);\n    }, {\n        // no-inline\n        'Messaging': _windowController2.default\n    });\n}\nregisterMessaging(_app2.default);\n//# sourceMappingURL=messaging.js.map\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _app = __webpack_require__(2);\n\nvar _app2 = _interopRequireDefault(_app);\n\n__webpack_require__(10);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* globals self */\n\n_app2.default.initializeApp({\n  messagingSenderId: \"621449212856\"\n});\n\nvar messaging = _app2.default.messaging();\n\nmessaging.setBackgroundMessageHandler(function (payload) {\n  return self.registration.showNotification(payload.notification.title, {\n    icon: 'https://hkoscon.org/logo.png',\n    body: payload.notifications.body,\n    vibrate: [500, 100, 500]\n  });\n});\n\nself.addEventListener('notificationclick', function (event) {\n  event.notification.close();\n  event.waitUntil(self.clients.matchAll({\n    type: 'window'\n  }).then(function (clients) {\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = clients[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var client = _step.value;\n\n        if ('focus' in client) {\n          return client.focus();\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return self.clients.openWindow('/2017/');\n  }));\n});\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.deepCopy = deepCopy;\nexports.deepExtend = deepExtend;\nexports.patchProperty = patchProperty;\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n/**\n * Do a deep-copy of basic JavaScript Objects or Arrays.\n */\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/function deepCopy(value) {\n    return deepExtend(undefined, value);\n}\n/**\n * Copy properties from source to target (recursively allows extension\n * of Objects and Arrays).  Scalar values in the target are over-written.\n * If target is undefined, an object of the appropriate type will be created\n * (and returned).\n *\n * We recursively copy all child properties of plain Objects in the source- so\n * that namespace- like dictionaries are merged.\n *\n * Note that the target can be a function, in which case the properties in\n * the source Object are copied onto it as static properties of the Function.\n */\nfunction deepExtend(target, source) {\n    if (!(source instanceof Object)) {\n        return source;\n    }\n    switch (source.constructor) {\n        case Date:\n            return new Date(source.getTime());\n        // Treat Dates like scalars; if the target date object had any child\n        // properties - they will be lost!\n\n        case Object:\n            if (target === undefined) {\n                target = {};\n            }\n            break;\n        case Array:\n            // Always copy the array source and overwrite the target.\n            target = [];\n            break;\n        default:\n            // Not a plain Object - treat it as a scalar.\n            return source;\n    }\n    for (var prop in source) {\n        if (!source.hasOwnProperty(prop)) {\n            continue;\n        }\n        target[prop] = deepExtend(target[prop], source[prop]);\n    }\n    return target;\n}\n// TODO: Really needed (for JSCompiler type checking)?\nfunction patchProperty(obj, prop, value) {\n    obj[prop] = value;\n}\n//# sourceMappingURL=deep_copy.js.map\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () {\n    function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n    };\n}(); /**\n     * Copyright 2017 Google Inc.\n     *\n     * Licensed under the Apache License, Version 2.0 (the \"License\");\n     * you may not use this file except in compliance with the License.\n     * You may obtain a copy of the License at\n     *\n     *   http://www.apache.org/licenses/LICENSE-2.0\n     *\n     * Unless required by applicable law or agreed to in writing, software\n     * distributed under the License is distributed on an \"AS IS\" BASIS,\n     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n     * See the License for the specific language governing permissions and\n     * limitations under the License.\n     */\n\nexports.createFirebaseNamespace = createFirebaseNamespace;\n\nvar _subscribe = __webpack_require__(4);\n\nvar _errors = __webpack_require__(1);\n\nvar _shared_promise = __webpack_require__(3);\n\nvar _deep_copy = __webpack_require__(12);\n\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n\nvar LocalPromise = _shared_promise.local.Promise;\nvar DEFAULT_ENTRY_NAME = '[DEFAULT]';\n// An array to capture listeners before the true auth functions\n// exist\nvar tokenListeners = [];\n/**\n * Global context object for a collection of services using\n * a shared authentication state.\n */\n\nvar FirebaseAppImpl = function () {\n    function FirebaseAppImpl(options, name, firebase_) {\n        _classCallCheck(this, FirebaseAppImpl);\n\n        this.firebase_ = firebase_;\n        this.isDeleted_ = false;\n        this.services_ = {};\n        this.name_ = name;\n        this.options_ = (0, _deep_copy.deepCopy)(options);\n    }\n\n    _createClass(FirebaseAppImpl, [{\n        key: 'delete',\n        value: function _delete() {\n            var _this = this;\n\n            return new LocalPromise(function (resolve) {\n                _this.checkDestroyed_();\n                resolve();\n            }).then(function () {\n                _this.firebase_.INTERNAL.removeApp(_this.name_);\n                var services = [];\n                Object.keys(_this.services_).forEach(function (serviceKey) {\n                    Object.keys(_this.services_[serviceKey]).forEach(function (instanceKey) {\n                        services.push(_this.services_[serviceKey][instanceKey]);\n                    });\n                });\n                return LocalPromise.all(services.map(function (service) {\n                    return service.INTERNAL.delete();\n                }));\n            }).then(function () {\n                _this.isDeleted_ = true;\n                _this.services_ = {};\n            });\n        }\n        /**\n         * Return a service instance associated with this app (creating it\n         * on demand), identified by the passed instanceIdentifier.\n         *\n         * NOTE: Currently storage is the only one that is leveraging this\n         * functionality. They invoke it by calling:\n         *\n         * ```javascript\n         * firebase.app().storage('STORAGE BUCKET ID')\n         * ```\n         *\n         * The service name is passed to this already\n         * @internal\n         */\n\n    }, {\n        key: '_getService',\n        value: function _getService(name) {\n            var instanceIdentifier = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_ENTRY_NAME;\n\n            this.checkDestroyed_();\n            if (!this.services_[name]) {\n                this.services_[name] = {};\n            }\n            if (!this.services_[name][instanceIdentifier]) {\n                /**\n                 * If a custom instance has been defined (i.e. not '[DEFAULT]')\n                 * then we will pass that instance on, otherwise we pass `null`\n                 */\n                var instanceSpecifier = instanceIdentifier !== DEFAULT_ENTRY_NAME ? instanceIdentifier : undefined;\n                var service = this.firebase_.INTERNAL.factories[name](this, this.extendApp.bind(this), instanceSpecifier);\n                this.services_[name][instanceIdentifier] = service;\n            }\n            return this.services_[name][instanceIdentifier];\n        }\n        /**\n         * Callback function used to extend an App instance at the time\n         * of service instance creation.\n         */\n\n    }, {\n        key: 'extendApp',\n        value: function extendApp(props) {\n            var _this2 = this;\n\n            // Copy the object onto the FirebaseAppImpl prototype\n            (0, _deep_copy.deepExtend)(FirebaseAppImpl.prototype, props);\n            /**\n             * If the app has overwritten the addAuthTokenListener stub, forward\n             * the active token listeners on to the true fxn.\n             *\n             * TODO: This function is required due to our current module\n             * structure. Once we are able to rely strictly upon a single module\n             * implementation, this code should be refactored and Auth should\n             * provide these stubs and the upgrade logic\n             */\n            if (props.INTERNAL && props.INTERNAL.addAuthTokenListener) {\n                tokenListeners.forEach(function (listener) {\n                    _this2.INTERNAL.addAuthTokenListener(listener);\n                });\n                tokenListeners = [];\n            }\n        }\n        /**\n         * This function will throw an Error if the App has already been deleted -\n         * use before performing API actions on the App.\n         */\n\n    }, {\n        key: 'checkDestroyed_',\n        value: function checkDestroyed_() {\n            if (this.isDeleted_) {\n                error('app-deleted', { 'name': this.name_ });\n            }\n        }\n    }, {\n        key: 'name',\n        get: function get() {\n            this.checkDestroyed_();\n            return this.name_;\n        }\n    }, {\n        key: 'options',\n        get: function get() {\n            this.checkDestroyed_();\n            return this.options_;\n        }\n    }]);\n\n    return FirebaseAppImpl;\n}();\n\nFirebaseAppImpl.prototype.INTERNAL = {\n    'getUid': function getUid() {\n        return null;\n    },\n    'getToken': function getToken() {\n        return LocalPromise.resolve(null);\n    },\n    'addAuthTokenListener': function addAuthTokenListener(callback) {\n        tokenListeners.push(callback);\n        // Make sure callback is called, asynchronously, in the absence of the auth module\n        setTimeout(function () {\n            return callback(null);\n        }, 0);\n    },\n    'removeAuthTokenListener': function removeAuthTokenListener(callback) {\n        tokenListeners = tokenListeners.filter(function (listener) {\n            return listener !== callback;\n        });\n    }\n};\n// Prevent dead-code elimination of these methods w/o invalid property\n// copying.\nFirebaseAppImpl.prototype.name && FirebaseAppImpl.prototype.options || FirebaseAppImpl.prototype.delete || console.log(\"dc\");\n/**\n * Return a firebase namespace object.\n *\n * In production, this will be called exactly once and the result\n * assigned to the 'firebase' global.  It may be called multiple times\n * in unit tests.\n */\nfunction createFirebaseNamespace() {\n    var apps_ = {};\n    var factories = {};\n    var appHooks = {};\n    // A namespace is a plain JavaScript Object.\n    var namespace = {\n        // Hack to prevent Babel from modifying the object returned\n        // as the firebase namespace.\n        '__esModule': true,\n        'initializeApp':\n        /**\n         * Create a new App instance (name must be unique).\n         */\n        function initializeApp(options, name) {\n            if (name === undefined) {\n                name = DEFAULT_ENTRY_NAME;\n            } else {\n                if (typeof name !== 'string' || name === '') {\n                    error('bad-app-name', { 'name': name + '' });\n                }\n            }\n            if (apps_[name] !== undefined) {\n                error('duplicate-app', { 'name': name });\n            }\n            var app = new FirebaseAppImpl(options, name, namespace);\n            apps_[name] = app;\n            callAppHooks(app, 'create');\n            return app;\n        }\n        /*\n         * Return an array of all the non-deleted FirebaseApps.\n         */\n\n        , 'app': app,\n        'apps': null,\n        'Promise': LocalPromise,\n        'SDK_VERSION': '4.1.1',\n        'INTERNAL': {\n            'registerService':\n            /*\n             * Register a Firebase Service.\n             *\n             * firebase.INTERNAL.registerService()\n             *\n             * TODO: Implement serviceProperties.\n             */\n            function registerService(name, createService, serviceProperties, appHook, allowMultipleInstances) {\n                // Cannot re-register a service that already exists\n                if (factories[name]) {\n                    error('duplicate-service', { 'name': name });\n                }\n                // Capture the service factory for later service instantiation\n                factories[name] = createService;\n                // Capture the appHook, if passed\n                if (appHook) {\n                    appHooks[name] = appHook;\n                    // Run the **new** app hook on all existing apps\n                    getApps().forEach(function (app) {\n                        appHook('create', app);\n                    });\n                }\n                // The Service namespace is an accessor function ...\n                var serviceNamespace = function serviceNamespace() {\n                    var appArg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : app();\n\n                    if (typeof appArg[name] !== 'function') {\n                        // Invalid argument.\n                        // This happens in the following case: firebase.storage('gs:/')\n                        error('invalid-app-argument', { 'name': name });\n                    }\n                    // Forward service instance lookup to the FirebaseApp.\n                    return appArg[name]();\n                };\n                // ... and a container for service-level properties.\n                if (serviceProperties !== undefined) {\n                    (0, _deep_copy.deepExtend)(serviceNamespace, serviceProperties);\n                }\n                // Monkey-patch the serviceNamespace onto the firebase namespace\n                namespace[name] = serviceNamespace;\n                // Patch the FirebaseAppImpl prototype\n                FirebaseAppImpl.prototype[name] = function () {\n                    var serviceFxn = this._getService.bind(this, name);\n\n                    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n                        args[_key] = arguments[_key];\n                    }\n\n                    return serviceFxn.apply(this, allowMultipleInstances ? args : []);\n                };\n                return serviceNamespace;\n            }\n            /**\n             * Patch the top-level firebase namespace with additional properties.\n             *\n             * firebase.INTERNAL.extendNamespace()\n             */\n\n            , 'createFirebaseNamespace': createFirebaseNamespace,\n            'extendNamespace': function extendNamespace(props) {\n                (0, _deep_copy.deepExtend)(namespace, props);\n            },\n            'createSubscribe': _subscribe.createSubscribe,\n            'ErrorFactory': _errors.ErrorFactory,\n            'removeApp':\n            /**\n             * Called by App.delete() - but before any services associated with the App\n             * are deleted.\n             */\n            function removeApp(name) {\n                var app = apps_[name];\n                callAppHooks(app, 'delete');\n                delete apps_[name];\n            }\n            /**\n             * Get the App object for a given name (or DEFAULT).\n             */\n\n            , 'factories': factories,\n            'useAsService': useAsService,\n            'Promise': _shared_promise.local.GoogPromise,\n            'deepExtend': _deep_copy.deepExtend\n        }\n    };\n    // Inject a circular default export to allow Babel users who were previously\n    // using:\n    //\n    //   import firebase from 'firebase';\n    //   which becomes: var firebase = require('firebase').default;\n    //\n    // instead of\n    //\n    //   import * as firebase from 'firebase';\n    //   which becomes: var firebase = require('firebase');\n    (0, _deep_copy.patchProperty)(namespace, 'default', namespace);\n    // firebase.apps is a read-only getter.\n    Object.defineProperty(namespace, 'apps', {\n        get: getApps\n    });function app(name) {\n        name = name || DEFAULT_ENTRY_NAME;\n        var result = apps_[name];\n        if (result === undefined) {\n            error('no-app', { 'name': name });\n        }\n        return result;\n    }\n    (0, _deep_copy.patchProperty)(app, 'App', FirebaseAppImpl);function getApps() {\n        // Make a copy so caller cannot mutate the apps list.\n        return Object.keys(apps_).map(function (name) {\n            return apps_[name];\n        });\n    }\n    function callAppHooks(app, eventName) {\n        Object.keys(factories).forEach(function (serviceName) {\n            // Ignore virtual services\n            var factoryName = useAsService(app, serviceName);\n            if (factoryName === null) {\n                return;\n            }\n            if (appHooks[factoryName]) {\n                appHooks[factoryName](eventName, app);\n            }\n        });\n    }\n    // Map the requested service to a registered service name\n    // (used to map auth to serverAuth service when needed).\n    function useAsService(app, name) {\n        if (name === 'serverAuth') {\n            return null;\n        }\n        app.options;\n\n        return name;\n    }\n    return namespace;\n}\nfunction error(code, args) {\n    throw appErrors.create(code, args);\n}\n// TypeScript does not support non-string indexes!\n// let errors: {[code: AppError: string} = {\nvar errors = {\n    'no-app': 'No Firebase App \\'{$name}\\' has been created - ' + 'call Firebase App.initializeApp()',\n    'bad-app-name': 'Illegal App name: \\'{$name}',\n    'duplicate-app': 'Firebase App named \\'{$name}\\' already exists',\n    'app-deleted': 'Firebase App named \\'{$name}\\' already deleted',\n    'duplicate-service': 'Firebase service named \\'{$name}\\' already registered',\n    'sa-not-supported': 'Initializing the Firebase SDK with a service ' + 'account is only allowed in a Node.js environment. On client ' + 'devices, you should instead initialize the SDK with an api key and ' + 'auth domain',\n    'invalid-app-argument': 'firebase.{$name}() takes either no argument or a ' + 'Firebase App instance.'\n};\nvar appErrors = new _errors.ErrorFactory('app', 'Firebase', errors);\n//# sourceMappingURL=firebase_app.js.map\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n\nvar _typeof2 = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\" ? function (obj) {\n    return typeof obj === \"undefined\" ? \"undefined\" : _typeof2(obj);\n} : function (obj) {\n    return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof2(obj);\n};\n\nvar _createClass = function () {\n    function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n    };\n}();\n\nvar _controllerInterface = __webpack_require__(5);\n\nvar _controllerInterface2 = _interopRequireDefault(_controllerInterface);\n\nvar _errors = __webpack_require__(0);\n\nvar _errors2 = _interopRequireDefault(_errors);\n\nvar _workerPageMessage = __webpack_require__(8);\n\nvar _workerPageMessage2 = _interopRequireDefault(_workerPageMessage);\n\nvar _fcmDetails = __webpack_require__(6);\n\nvar _fcmDetails2 = _interopRequireDefault(_fcmDetails);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });\n    } else {\n        obj[key] = value;\n    }return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n    if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }return call && ((typeof call === \"undefined\" ? \"undefined\" : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : _typeof2(superClass)));\n    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar FCM_MSG = 'FCM_MSG';\n\nvar SWController = function (_ControllerInterface) {\n    _inherits(SWController, _ControllerInterface);\n\n    function SWController(app) {\n        _classCallCheck(this, SWController);\n\n        var _this = _possibleConstructorReturn(this, (SWController.__proto__ || Object.getPrototypeOf(SWController)).call(this, app));\n\n        self.addEventListener('push', function (e) {\n            return _this.onPush_(e);\n        }, false);\n        self.addEventListener('pushsubscriptionchange', function (e) {\n            return _this.onSubChange_(e);\n        }, false);\n        self.addEventListener('notificationclick', function (e) {\n            return _this.onNotificationClick_(e);\n        }, false);\n        /**\n         * @private\n         * @type {function(Object)|null}\n         */\n        _this.bgMessageHandler_ = null;\n        return _this;\n    }\n    /**\n    * A handler for push events that shows notifications based on the content of\n    * the payload.\n    *\n    * The payload must be a JSON-encoded Object with a `notification` key. The\n    * value of the `notification` property will be used as the NotificationOptions\n    * object passed to showNotification. Additionally, the `title` property of the\n    * notification object will be used as the title.\n    *\n    * If there is no notification data in the payload then no notification will be\n    * shown.\n    * @private\n    */\n\n    _createClass(SWController, [{\n        key: 'onPush_',\n        value: function onPush_(event) {\n            var _this2 = this;\n\n            var msgPayload = void 0;\n            try {\n                msgPayload = event.data.json();\n            } catch (err) {\n                // Not JSON so not an FCM message\n                return;\n            }\n            var handleMsgPromise = this.hasVisibleClients_().then(function (hasVisibleClients) {\n                if (hasVisibleClients) {\n                    // Do not need to show a notification.\n                    if (msgPayload.notification || _this2.bgMessageHandler_) {\n                        // Send to page\n                        return _this2.sendMessageToWindowClients_(msgPayload);\n                    }\n                    return;\n                }\n                var notificationDetails = _this2.getNotificationData_(msgPayload);\n                if (notificationDetails) {\n                    var notificationTitle = notificationDetails.title || '';\n                    return self.registration.showNotification(notificationTitle, notificationDetails);\n                } else if (_this2.bgMessageHandler_) {\n                    return _this2.bgMessageHandler_(msgPayload);\n                }\n            });\n            event.waitUntil(handleMsgPromise);\n        }\n        /**\n        * @private\n        */\n\n    }, {\n        key: 'onSubChange_',\n        value: function onSubChange_(event) {\n            var _this3 = this;\n\n            var promiseChain = this.getToken().then(function (token) {\n                if (!token) {\n                    // We can't resubscribe if we don't have an FCM token for this scope.\n                    throw _this3.errorFactory_.create(_errors2.default.codes.NO_FCM_TOKEN_FOR_RESUBSCRIBE);\n                }\n                var tokenDetails = null;\n                var tokenManager = _this3.getTokenManager();\n                return tokenManager.getTokenDetailsFromToken(token).then(function (details) {\n                    tokenDetails = details;\n                    if (!tokenDetails) {\n                        throw _this3.errorFactory_.create(_errors2.default.codes.INVALID_SAVED_TOKEN);\n                    }\n                    // Attempt to get a new subscription\n                    return self.registration.pushManager.subscribe(_fcmDetails2.default.SUBSCRIPTION_OPTIONS);\n                }).then(function (newSubscription) {\n                    // Send new subscription to FCM.\n                    return tokenManager.subscribeToFCM(tokenDetails.fcmSenderId, newSubscription, tokenDetails.fcmPushSet);\n                }).catch(function (err) {\n                    // The best thing we can do is log this to the terminal so\n                    // developers might notice the error.\n                    return tokenManager.deleteToken(tokenDetails.fcmToken).then(function () {\n                        throw _this3.errorFactory_.create(_errors2.default.codes.UNABLE_TO_RESUBSCRIBE, {\n                            'message': err\n                        });\n                    });\n                });\n            });\n            event.waitUntil(promiseChain);\n        }\n        /**\n        * @private\n        */\n\n    }, {\n        key: 'onNotificationClick_',\n        value: function onNotificationClick_(event) {\n            var _this4 = this;\n\n            if (!(event.notification && event.notification.data && event.notification.data[FCM_MSG])) {\n                // Not an FCM notification, do nothing.\n                return;\n            }\n            // Prevent other listeners from receiving the event\n            event.stopImmediatePropagation();\n            event.notification.close();\n            var msgPayload = event.notification.data[FCM_MSG];\n            var clickAction = msgPayload['notification']['click_action'];\n            if (!clickAction) {\n                // Nothing to do.\n                return;\n            }\n            var promiseChain = this.getWindowClient_(clickAction).then(function (windowClient) {\n                if (!windowClient) {\n                    // Unable to find window client so need to open one.\n                    return self.clients.openWindow(clickAction);\n                }\n                return windowClient;\n            }).then(function (windowClient) {\n                if (!windowClient) {\n                    // Window Client will not be returned if it's for a third party origin.\n                    return;\n                }\n                // Delete notification data from payload before sending to the page.\n                msgPayload['notification'];\n\n                delete msgPayload['notification'];\n                var internalMsg = _workerPageMessage2.default.createNewMsg(_workerPageMessage2.default.TYPES_OF_MSG.NOTIFICATION_CLICKED, msgPayload);\n                // Attempt to send a message to the client to handle the data\n                // Is affected by: https://github.com/slightlyoff/ServiceWorker/issues/728\n                return _this4.attemptToMessageClient_(windowClient, internalMsg);\n            });\n            event.waitUntil(promiseChain);\n        }\n        /**\n         * @private\n         * @param {Object} msgPayload\n         * @return {NotificationOptions|undefined}\n         */\n\n    }, {\n        key: 'getNotificationData_',\n        value: function getNotificationData_(msgPayload) {\n            if (!msgPayload) {\n                return;\n            }\n            if (_typeof(msgPayload.notification) !== 'object') {\n                return;\n            }\n            var notificationInformation = Object.assign({}, msgPayload.notification);\n            // Put the message payload under FCM_MSG name so we can identify the\n            // notification as being an FCM notification vs a notification from\n            // somewhere else (i.e. normal web push or developer generated\n            // notification).\n            notificationInformation['data'] = _defineProperty({}, FCM_MSG, msgPayload);\n            return notificationInformation;\n        }\n        /**\n         * Calling setBackgroundMessageHandler will opt in to some specific\n         * behaviours.\n         * 1.) If a notification doesn't need to be shown due to a window already\n         * being visible, then push messages will be sent to the page.\n         * 2.) If a notification needs to be shown, and the message contains no\n         * notification data this method will be called\n         * and the promise it returns will be passed to event.waitUntil.\n         * If you do not set this callback then all push messages will let and the\n         * developer can handle them in a their own 'push' event callback\n         * @export\n         * @param {function(Object)} callback The callback to be called when a push\n         * message is received and a notification must be shown. The callback will\n         * be given the data from the push message.\n         */\n\n    }, {\n        key: 'setBackgroundMessageHandler',\n        value: function setBackgroundMessageHandler(callback) {\n            if (callback && typeof callback !== 'function') {\n                throw this.errorFactory_.create(_errors2.default.codes.BG_HANDLER_FUNCTION_EXPECTED);\n            }\n            this.bgMessageHandler_ = callback;\n        }\n        /**\n         * @private\n         * @param {string} url The URL to look for when focusing a client.\n         * @return {Object} Returns an existing window client or a newly opened\n         * WindowClient.\n         */\n\n    }, {\n        key: 'getWindowClient_',\n        value: function getWindowClient_(url) {\n            // Use URL to normalize the URL when comparing to windowClients.\n            // This at least handles whether to include trailing slashes or not\n            var parsedURL = new URL(url).href;\n            return self.clients.matchAll({\n                type: 'window',\n                includeUncontrolled: true\n            }).then(function (clientList) {\n                var suitableClient = null;\n                for (var i = 0; i < clientList.length; i++) {\n                    var parsedClientUrl = new URL(clientList[i].url).href;\n                    if (parsedClientUrl === parsedURL) {\n                        suitableClient = clientList[i];\n                        break;\n                    }\n                }\n                if (suitableClient) {\n                    suitableClient.focus();\n                    return suitableClient;\n                }\n            });\n        }\n        /**\n         * This message will attempt to send the message to a window client.\n         * @private\n         * @param {Object} client The WindowClient to send the message to.\n         * @param {Object} message The message to send to the client.\n         * @returns {Promise} Returns a promise that resolves after sending the\n         * message. This does not guarantee that the message was successfully\n         * received.\n         */\n\n    }, {\n        key: 'attemptToMessageClient_',\n        value: function attemptToMessageClient_(client, message) {\n            var _this5 = this;\n\n            return new Promise(function (resolve, reject) {\n                if (!client) {\n                    return reject(_this5.errorFactory_.create(_errors2.default.codes.NO_WINDOW_CLIENT_TO_MSG));\n                }\n                client.postMessage(message);\n                resolve();\n            });\n        }\n        /**\n         * @private\n         * @returns {Promise<boolean>} If there is currently a visible WindowClient,\n         * this method will resolve to true, otherwise false.\n         */\n\n    }, {\n        key: 'hasVisibleClients_',\n        value: function hasVisibleClients_() {\n            return self.clients.matchAll({\n                type: 'window',\n                includeUncontrolled: true\n            }).then(function (clientList) {\n                return clientList.some(function (client) {\n                    return client.visibilityState === 'visible';\n                });\n            });\n        }\n        /**\n         * @private\n         * @param {Object} msgPayload The data from the push event that should be sent\n         * to all available pages.\n         * @returns {Promise} Returns a promise that resolves once the message\n         * has been sent to all WindowClients.\n         */\n\n    }, {\n        key: 'sendMessageToWindowClients_',\n        value: function sendMessageToWindowClients_(msgPayload) {\n            var _this6 = this;\n\n            return self.clients.matchAll({\n                type: 'window',\n                includeUncontrolled: true\n            }).then(function (clientList) {\n                var internalMsg = _workerPageMessage2.default.createNewMsg(_workerPageMessage2.default.TYPES_OF_MSG.PUSH_MSG_RECEIVED, msgPayload);\n                return Promise.all(clientList.map(function (client) {\n                    return _this6.attemptToMessageClient_(client, internalMsg);\n                }));\n            });\n        }\n        /**\n         * This will register the default service worker and return the registration.\n         * @private\n         * @return {Promise<!ServiceWorkerRegistration>} The service worker\n         * registration to be used for the push service.\n         */\n\n    }, {\n        key: 'getSWRegistration_',\n        value: function getSWRegistration_() {\n            return Promise.resolve(self.registration);\n        }\n    }]);\n\n    return SWController;\n}(_controllerInterface2.default);\n\nexports.default = SWController;\nmodule.exports = exports['default'];\n//# sourceMappingURL=sw-controller.js.map\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () {\n    function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n    };\n}();\n\nvar _get = function get(object, property, receiver) {\n    if (object === null) object = Function.prototype;var desc = Object.getOwnPropertyDescriptor(object, property);if (desc === undefined) {\n        var parent = Object.getPrototypeOf(object);if (parent === null) {\n            return undefined;\n        } else {\n            return get(parent, property, receiver);\n        }\n    } else if (\"value\" in desc) {\n        return desc.value;\n    } else {\n        var getter = desc.get;if (getter === undefined) {\n            return undefined;\n        }return getter.call(receiver);\n    }\n};\n\nvar _controllerInterface = __webpack_require__(5);\n\nvar _controllerInterface2 = _interopRequireDefault(_controllerInterface);\n\nvar _errors = __webpack_require__(0);\n\nvar _errors2 = _interopRequireDefault(_errors);\n\nvar _workerPageMessage = __webpack_require__(8);\n\nvar _workerPageMessage2 = _interopRequireDefault(_workerPageMessage);\n\nvar _defaultSw = __webpack_require__(17);\n\nvar _defaultSw2 = _interopRequireDefault(_defaultSw);\n\nvar _notificationPermission = __webpack_require__(7);\n\nvar _notificationPermission2 = _interopRequireDefault(_notificationPermission);\n\nvar _subscribe = __webpack_require__(4);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n    if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }return call && ((typeof call === \"undefined\" ? \"undefined\" : _typeof(call)) === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : _typeof(superClass)));\n    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar WindowController = function (_ControllerInterface) {\n    _inherits(WindowController, _ControllerInterface);\n\n    /**\n     * A service that provides a MessagingService instance.\n     * @param {!firebase.app.App} app\n     */\n    function WindowController(app) {\n        _classCallCheck(this, WindowController);\n\n        /**\n         * @private\n         * @type {ServiceWorkerRegistration}\n         */\n        var _this = _possibleConstructorReturn(this, (WindowController.__proto__ || Object.getPrototypeOf(WindowController)).call(this, app));\n\n        _this.registrationToUse_;\n        /**\n         * @private\n         * @type {Promise}\n         */\n        _this.manifestCheckPromise_;\n        /**\n         * @private\n         * @type {firebase.Observer}\n         */\n        _this.messageObserver_ = null;\n        /**\n         * @private {!firebase.Subscribe} The subscribe function to the onMessage\n         * observer.\n         */\n        _this.onMessage_ = (0, _subscribe.createSubscribe)(function (observer) {\n            _this.messageObserver_ = observer;\n        });\n        /**\n         * @private\n         * @type {firebase.Observer}\n         */\n        _this.tokenRefreshObserver_ = null;\n        _this.onTokenRefresh_ = (0, _subscribe.createSubscribe)(function (observer) {\n            _this.tokenRefreshObserver_ = observer;\n        });\n        _this.setupSWMessageListener_();\n        return _this;\n    }\n    /**\n     * This method returns an FCM token if it can be generated.\n     * The return promise will reject if the browser doesn't support\n     * FCM, if permission is denied for notifications or it's not\n     * possible to generate a token.\n     * @export\n     * @return {Promise<string> | Promise<null>} Returns a promise the\n     * resolves to an FCM token or null if permission isn't granted.\n     */\n\n    _createClass(WindowController, [{\n        key: 'getToken',\n        value: function getToken() {\n            var _this2 = this;\n\n            // Check that the required API's are available\n            if (!this.isSupported_()) {\n                return Promise.reject(this.errorFactory_.create(_errors2.default.codes.UNSUPPORTED_BROWSER));\n            }\n            return this.manifestCheck_().then(function () {\n                return _get(WindowController.prototype.__proto__ || Object.getPrototypeOf(WindowController.prototype), 'getToken', _this2).call(_this2);\n            });\n        }\n        /**\n         * The method checks that a manifest is defined and has the correct GCM\n         * sender ID.\n         * @private\n         * @return {Promise} Returns a promise that resolves if the manifest matches\n         * our required sender ID\n         */\n\n    }, {\n        key: 'manifestCheck_',\n        value: function manifestCheck_() {\n            var _this3 = this;\n\n            if (this.manifestCheckPromise_) {\n                return this.manifestCheckPromise_;\n            }\n            var manifestTag = document.querySelector('link[rel=\"manifest\"]');\n            if (!manifestTag) {\n                this.manifestCheckPromise_ = Promise.resolve();\n            } else {\n                this.manifestCheckPromise_ = fetch(manifestTag.href).then(function (response) {\n                    return response.json();\n                }).catch(function () {\n                    // If the download or parsing fails allow check.\n                    // We only want to error if we KNOW that the gcm_sender_id is incorrect.\n                    return Promise.resolve();\n                }).then(function (manifestContent) {\n                    if (!manifestContent) {\n                        return;\n                    }\n                    if (!manifestContent['gcm_sender_id']) {\n                        return;\n                    }\n                    if (manifestContent['gcm_sender_id'] !== '103953800507') {\n                        throw _this3.errorFactory_.create(_errors2.default.codes.INCORRECT_GCM_SENDER_ID);\n                    }\n                });\n            }\n            return this.manifestCheckPromise_;\n        }\n        /**\n         * Request permission if it is not currently granted\n         * @export\n         * @returns {Promise} Resolves if the permission was granted, otherwise\n         * rejects\n         */\n\n    }, {\n        key: 'requestPermission',\n        value: function requestPermission() {\n            var _this4 = this;\n\n            if (Notification.permission === _notificationPermission2.default.granted) {\n                return Promise.resolve();\n            }\n            return new Promise(function (resolve, reject) {\n                var managePermissionResult = function managePermissionResult(result) {\n                    if (result === _notificationPermission2.default.granted) {\n                        return resolve();\n                    } else if (result === _notificationPermission2.default.denied) {\n                        return reject(_this4.errorFactory_.create(_errors2.default.codes.PERMISSION_BLOCKED));\n                    } else {\n                        return reject(_this4.errorFactory_.create(_errors2.default.codes.PERMISSION_DEFAULT));\n                    }\n                };\n                // The Notification.requestPermission API was changed to\n                // return a promise so now have to handle both in case\n                // browsers stop support callbacks for promised version\n                var permissionPromise = Notification.requestPermission(function (result) {\n                    if (permissionPromise) {\n                        // Let the promise manage this\n                        return;\n                    }\n                    managePermissionResult(result);\n                });\n                if (permissionPromise) {\n                    // Prefer the promise version as it's the future API.\n                    permissionPromise.then(managePermissionResult);\n                }\n            });\n        }\n        /**\n         * This method allows a developer to override the default service worker and\n         * instead use a custom service worker.\n         * @export\n         * @param {!ServiceWorkerRegistration} registration The service worker\n         * registration that should be used to receive the push messages.\n         */\n\n    }, {\n        key: 'useServiceWorker',\n        value: function useServiceWorker(registration) {\n            if (!(registration instanceof ServiceWorkerRegistration)) {\n                throw this.errorFactory_.create(_errors2.default.codes.SW_REGISTRATION_EXPECTED);\n            }\n            if (typeof this.registrationToUse_ !== 'undefined') {\n                throw this.errorFactory_.create(_errors2.default.codes.USE_SW_BEFORE_GET_TOKEN);\n            }\n            this.registrationToUse_ = registration;\n        }\n        /**\n         * @export\n         * @param {!firebase.Observer|function(*)} nextOrObserver An observer object\n         * or a function triggered on message.\n         * @param {function(!Error)=} optError Optional A function triggered on\n         * message error.\n         * @param {function()=} optCompleted Optional function triggered when the\n         * observer is removed.\n         * @return {!function()} The unsubscribe function for the observer.\n         */\n\n    }, {\n        key: 'onMessage',\n        value: function onMessage(nextOrObserver, optError, optCompleted) {\n            return this.onMessage_(nextOrObserver, optError, optCompleted);\n        }\n        /**\n         * @export\n         * @param {!firebase.Observer|function()} nextOrObserver An observer object\n         * or a function triggered on token refresh.\n         * @param {function(!Error)=} optError Optional A function\n         * triggered on token refresh error.\n         * @param {function()=} optCompleted Optional function triggered when the\n         * observer is removed.\n         * @return {!function()} The unsubscribe function for the observer.\n         */\n\n    }, {\n        key: 'onTokenRefresh',\n        value: function onTokenRefresh(nextOrObserver, optError, optCompleted) {\n            return this.onTokenRefresh_(nextOrObserver, optError, optCompleted);\n        }\n        /**\n         * Given a registration, wait for the service worker it relates to\n         * become activer\n         * @private\n         * @param  {ServiceWorkerRegistration} registration Registration to wait\n         * for service worker to become active\n         * @return {Promise<!ServiceWorkerRegistration>} Wait for service worker\n         * registration to become active\n         */\n\n    }, {\n        key: 'waitForRegistrationToActivate_',\n        value: function waitForRegistrationToActivate_(registration) {\n            var _this5 = this;\n\n            var serviceWorker = registration.installing || registration.waiting || registration.active;\n            return new Promise(function (resolve, reject) {\n                if (!serviceWorker) {\n                    // This is a rare scenario but has occured in firefox\n                    reject(_this5.errorFactory_.create(_errors2.default.codes.NO_SW_IN_REG));\n                    return;\n                }\n                // Because the Promise function is called on next tick there is a\n                // small chance that the worker became active or redundant already.\n                if (serviceWorker.state === 'activated') {\n                    resolve(registration);\n                    return;\n                }\n                if (serviceWorker.state === 'redundant') {\n                    reject(_this5.errorFactory_.create(_errors2.default.codes.SW_REG_REDUNDANT));\n                    return;\n                }\n                var stateChangeListener = function stateChangeListener() {\n                    if (serviceWorker.state === 'activated') {\n                        resolve(registration);\n                    } else if (serviceWorker.state === 'redundant') {\n                        reject(_this5.errorFactory_.create(_errors2.default.codes.SW_REG_REDUNDANT));\n                    } else {\n                        // Return early and wait to next state change\n                        return;\n                    }\n                    serviceWorker.removeEventListener('statechange', stateChangeListener);\n                };\n                serviceWorker.addEventListener('statechange', stateChangeListener);\n            });\n        }\n        /**\n         * This will regiater the default service worker and return the registration\n         * @private\n         * @return {Promise<!ServiceWorkerRegistration>} The service worker\n         * registration to be used for the push service.\n         */\n\n    }, {\n        key: 'getSWRegistration_',\n        value: function getSWRegistration_() {\n            var _this6 = this;\n\n            if (this.registrationToUse_) {\n                return this.waitForRegistrationToActivate_(this.registrationToUse_);\n            }\n            // Make the registration null so we know useServiceWorker will not\n            // use a new service worker as registrationToUse_ is no longer undefined\n            this.registrationToUse_ = null;\n            return navigator.serviceWorker.register(_defaultSw2.default.path, {\n                scope: _defaultSw2.default.scope\n            }).catch(function (err) {\n                throw _this6.errorFactory_.create(_errors2.default.codes.FAILED_DEFAULT_REGISTRATION, {\n                    'browserErrorMessage': err.message\n                });\n            }).then(function (registration) {\n                return _this6.waitForRegistrationToActivate_(registration).then(function () {\n                    _this6.registrationToUse_ = registration;\n                    // We update after activation due to an issue with Firefox v49 where\n                    // a race condition occassionally causes the service work to not\n                    // install\n                    registration.update();\n                    return registration;\n                });\n            });\n        }\n        /**\n         * This method will set up a message listener to handle\n         * events from the service worker that should trigger\n         * events in the page.\n         *\n         * @private\n         */\n\n    }, {\n        key: 'setupSWMessageListener_',\n        value: function setupSWMessageListener_() {\n            var _this7 = this;\n\n            if (!('serviceWorker' in navigator)) {\n                return;\n            }\n            navigator.serviceWorker.addEventListener('message', function (event) {\n                if (!event.data || !event.data[_workerPageMessage2.default.PARAMS.TYPE_OF_MSG]) {\n                    // Not a message from FCM\n                    return;\n                }\n                var workerPageMessage = event.data;\n                switch (workerPageMessage[_workerPageMessage2.default.PARAMS.TYPE_OF_MSG]) {\n                    case _workerPageMessage2.default.TYPES_OF_MSG.PUSH_MSG_RECEIVED:\n                    case _workerPageMessage2.default.TYPES_OF_MSG.NOTIFICATION_CLICKED:\n                        var pushMessage = workerPageMessage[_workerPageMessage2.default.PARAMS.DATA];\n                        _this7.messageObserver_.next(pushMessage);\n                        break;\n                    default:\n                        // Noop.\n                        break;\n                }\n            }, false);\n        }\n        /**\n         * Checks to see if the required API's are valid or not.\n         * @private\n         * @return {boolean} Returns true if the desired APIs are available.\n         */\n\n    }, {\n        key: 'isSupported_',\n        value: function isSupported_() {\n            return 'serviceWorker' in navigator && 'PushManager' in window && 'Notification' in window && ServiceWorkerRegistration.prototype.hasOwnProperty('showNotification') && PushSubscription.prototype.hasOwnProperty('getKey');\n        }\n    }]);\n\n    return WindowController;\n}(_controllerInterface2.default);\n\nexports.default = WindowController;\nmodule.exports = exports['default'];\n//# sourceMappingURL=window-controller.js.map\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\nfunction toBase64(arrayBuffer) {\n    var uint8Version = new Uint8Array(arrayBuffer);\n    return window.btoa(String.fromCharCode.apply(null, uint8Version));\n}\n\nexports.default = function (arrayBuffer) {\n    var base64String = toBase64(arrayBuffer);\n    return base64String.replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=array-buffer-to-base64.js.map\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    path: '/firebase-messaging-sw.js',\n    scope: '/firebase-cloud-messaging-push-scope'\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=default-sw.js.map\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () {\n    function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n    };\n}();\n\nvar _errors = __webpack_require__(1);\n\nvar _errors2 = __webpack_require__(0);\n\nvar _errors3 = _interopRequireDefault(_errors2);\n\nvar _arrayBufferToBase = __webpack_require__(16);\n\nvar _arrayBufferToBase2 = _interopRequireDefault(_arrayBufferToBase);\n\nvar _fcmDetails = __webpack_require__(6);\n\nvar _fcmDetails2 = _interopRequireDefault(_fcmDetails);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n\nvar FCM_TOKEN_DETAILS_DB = 'fcm_token_details_db';\nvar FCM_TOKEN_OBJ_STORE = 'fcm_token_object_Store';\nvar FCM_TOKEN_DETAILS_DB_VERSION = 1;\n\nvar TokenManager = function () {\n    function TokenManager() {\n        _classCallCheck(this, TokenManager);\n\n        this.errorFactory_ = new _errors.ErrorFactory('messaging', 'Messaging', _errors3.default.map);\n        this.openDbPromise_ = null;\n    }\n    /**\n     * Get the indexedDB as a promsie.\n     * @private\n     * @return {Promise<IDBDatabase>} The IndexedDB database\n     */\n\n    _createClass(TokenManager, [{\n        key: 'openDatabase_',\n        value: function openDatabase_() {\n            if (this.openDbPromise_) {\n                return this.openDbPromise_;\n            }\n            this.openDbPromise_ = new Promise(function (resolve, reject) {\n                var request = indexedDB.open(FCM_TOKEN_DETAILS_DB, FCM_TOKEN_DETAILS_DB_VERSION);\n                request.onerror = function (event) {\n                    reject(event.target.error);\n                };\n                request.onsuccess = function (event) {\n                    resolve(event.target.result);\n                };\n                request.onupgradeneeded = function (event) {\n                    var db = event.target.result;\n                    var objectStore = db.createObjectStore(FCM_TOKEN_OBJ_STORE, {\n                        keyPath: 'swScope'\n                    });\n                    // Make sure the sender ID can be searched\n                    objectStore.createIndex('fcmSenderId', 'fcmSenderId', {\n                        unique: false\n                    });\n                    objectStore.createIndex('fcmToken', 'fcmToken', {\n                        unique: true\n                    });\n                };\n            });\n            return this.openDbPromise_;\n        }\n        /**\n         * Close the currently open database.\n         * @return {Promise<?>} Returns the result of the promise chain.\n         */\n\n    }, {\n        key: 'closeDatabase',\n        value: function closeDatabase() {\n            var _this = this;\n\n            if (this.openDbPromise_) {\n                return this.openDbPromise_.then(function (db) {\n                    db.close();\n                    _this.openDbPromise_ = null;\n                });\n            }\n            return Promise.resolve();\n        }\n        /**\n         * Given a token, this method will look up the details in indexedDB.\n         * @public\n         * @param {string} fcmToken\n         * @return {Promise<Object>} The details associated with that token.\n         */\n\n    }, {\n        key: 'getTokenDetailsFromToken',\n        value: function getTokenDetailsFromToken(fcmToken) {\n            return this.openDatabase_().then(function (db) {\n                return new Promise(function (resolve, reject) {\n                    var transaction = db.transaction([FCM_TOKEN_OBJ_STORE]);\n                    var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);\n                    var index = objectStore.index('fcmToken');\n                    var request = index.get(fcmToken);\n                    request.onerror = function (event) {\n                        reject(event.target.error);\n                    };\n                    request.onsuccess = function (event) {\n                        resolve(event.target.result);\n                    };\n                });\n            });\n        }\n    }, {\n        key: 'getTokenDetailsFromSWScope_',\n        value: function getTokenDetailsFromSWScope_(swScope) {\n            return this.openDatabase_().then(function (db) {\n                return new Promise(function (resolve, reject) {\n                    var transaction = db.transaction([FCM_TOKEN_OBJ_STORE]);\n                    var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);\n                    var scopeRequest = objectStore.get(swScope);\n                    scopeRequest.onerror = function (event) {\n                        reject(event.target.error);\n                    };\n                    scopeRequest.onsuccess = function (event) {\n                        resolve(event.target.result);\n                    };\n                });\n            });\n        }\n    }, {\n        key: 'getAllTokenDetailsForSenderId_',\n        value: function getAllTokenDetailsForSenderId_(senderId) {\n            return this.openDatabase_().then(function (db) {\n                return new Promise(function (resolve, reject) {\n                    var transaction = db.transaction([FCM_TOKEN_OBJ_STORE]);\n                    var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);\n                    var senderIdTokens = [];\n                    var cursorRequest = objectStore.openCursor();\n                    cursorRequest.onerror = function (event) {\n                        reject(event.target.error);\n                    };\n                    cursorRequest.onsuccess = function (event) {\n                        var cursor = event.target.result;\n                        if (cursor) {\n                            if (cursor.value['fcmSenderId'] === senderId) {\n                                senderIdTokens.push(cursor.value);\n                            }\n                            cursor.continue();\n                        } else {\n                            resolve(senderIdTokens);\n                        }\n                    };\n                });\n            });\n        }\n        /**\n         * Given a PushSubscription and messagingSenderId, get an FCM token.\n         * @public\n         * @param  {string} senderId The 'messagingSenderId' to tie the token to.\n         * @param  {PushSubscription} subscription The PushSusbcription to \"federate\".\n         * @param  {string=} pushSet If defined this will swap the subscription for\n         * matching FCM token.\n         * @return {Promise<!Object>} Returns the FCM token to be used in place\n         * of the PushSubscription.\n         */\n\n    }, {\n        key: 'subscribeToFCM',\n        value: function subscribeToFCM(senderId, subscription, pushSet) {\n            var _this2 = this;\n\n            var p256dh = (0, _arrayBufferToBase2.default)(subscription['getKey']('p256dh'));\n            var auth = (0, _arrayBufferToBase2.default)(subscription['getKey']('auth'));\n            var fcmSubscribeBody = 'authorized_entity=' + senderId + '&' + ('endpoint=' + subscription.endpoint + '&') + ('encryption_key=' + p256dh + '&') + ('encryption_auth=' + auth);\n            if (pushSet) {\n                fcmSubscribeBody += '&pushSet=' + pushSet;\n            }\n            var headers = new Headers();\n            headers.append('Content-Type', 'application/x-www-form-urlencoded');\n            var subscribeOptions = {\n                method: 'POST',\n                headers: headers,\n                body: fcmSubscribeBody\n            };\n            return fetch(_fcmDetails2.default.ENDPOINT + '/fcm/connect/subscribe', subscribeOptions).then(function (response) {\n                return response.json();\n            }).then(function (response) {\n                var fcmTokenResponse = response;\n                if (fcmTokenResponse['error']) {\n                    var message = fcmTokenResponse['error']['message'];\n                    throw _this2.errorFactory_.create(_errors3.default.codes.TOKEN_SUBSCRIBE_FAILED, { 'message': message });\n                }\n                if (!fcmTokenResponse['token']) {\n                    throw _this2.errorFactory_.create(_errors3.default.codes.TOKEN_SUBSCRIBE_NO_TOKEN);\n                }\n                if (!fcmTokenResponse['pushSet']) {\n                    throw _this2.errorFactory_.create(_errors3.default.codes.TOKEN_SUBSCRIBE_NO_PUSH_SET);\n                }\n                return {\n                    'token': fcmTokenResponse['token'],\n                    'pushSet': fcmTokenResponse['pushSet']\n                };\n            });\n        }\n        /**\n         * Checks the that fields in the PushSubscription are equivalent to the\n         * details stores in the masterTokenDetails.\n         * @private\n         * @param  {PushSubscription} subscription The push subscription we expect\n         * the master token to match.\n         * @param  {Object}  masterTokenDetails The saved details we wish to compare\n         * with the PushSubscription\n         * @return {boolean} true if the subscription and token details are\n         * equivalent.\n         */\n\n    }, {\n        key: 'isSameSubscription_',\n        value: function isSameSubscription_(subscription, masterTokenDetails) {\n            // getKey() isn't defined in the PushSubscription externs file, hence\n            // subscription['getKey']('<key name>').\n            return subscription.endpoint === masterTokenDetails['endpoint'] && (0, _arrayBufferToBase2.default)(subscription['getKey']('auth')) === masterTokenDetails['auth'] && (0, _arrayBufferToBase2.default)(subscription['getKey']('p256dh')) === masterTokenDetails['p256dh'];\n        }\n        /**\n         * Save the details for the fcm token for re-use at a later date.\n         * @private\n         * @param  {string} senderId The 'messagingSenderId' used for this project\n         * @param  {ServiceWorkerRegistration} swRegistration The service worker\n         * used to subscribe the user for web push\n         * @param  {PushSubscription} subscription The push subscription passed to\n         * FCM for the current token.\n         * @param  {string} fcmToken The FCM token currently used on this\n         * device.\n         * @param  {string} fcmPushSet The FCM push tied to the fcm token.\n         * @return {Promise<void>}\n         */\n\n    }, {\n        key: 'saveTokenDetails_',\n        value: function saveTokenDetails_(senderId, swRegistration, subscription, fcmToken, fcmPushSet) {\n            var details = {\n                'swScope': swRegistration.scope,\n                'endpoint': subscription.endpoint,\n                'auth': (0, _arrayBufferToBase2.default)(subscription['getKey']('auth')),\n                'p256dh': (0, _arrayBufferToBase2.default)(subscription['getKey']('p256dh')),\n                'fcmToken': fcmToken,\n                'fcmPushSet': fcmPushSet,\n                'fcmSenderId': senderId\n            };\n            return this.openDatabase_().then(function (db) {\n                return new Promise(function (resolve, reject) {\n                    var transaction = db.transaction([FCM_TOKEN_OBJ_STORE], 'readwrite');\n                    var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);\n                    var request = objectStore.put(details);\n                    request.onerror = function (event) {\n                        reject(event.target.error);\n                    };\n                    request.onsuccess = function () {\n                        resolve();\n                    };\n                });\n            });\n        }\n        /**\n         * Returns the saved FCM Token if one is available and still valid,\n         * otherwise `null` is returned.\n         * @param {string} senderId This should be the sender ID associated with the\n         * FCM Token being retrieved.\n         * @param {ServiceWorkerRegistration} swRegistration Registration to be used\n         * to subscribe the user to push.\n         * @return {Promise<string> | Promise} Returns the saved FCM Token if\n         * avilable and valid.\n         * @export\n         */\n\n    }, {\n        key: 'getSavedToken',\n        value: function getSavedToken(senderId, swRegistration) {\n            var _this3 = this;\n\n            if (!(swRegistration instanceof ServiceWorkerRegistration)) {\n                return Promise.reject(this.errorFactory_.create(_errors3.default.codes.SW_REGISTRATION_EXPECTED));\n            }\n            if (typeof senderId !== 'string' || senderId.length === 0) {\n                return Promise.reject(this.errorFactory_.create(_errors3.default.codes.BAD_SENDER_ID));\n            }\n            return this.getAllTokenDetailsForSenderId_(senderId).then(function (allTokenDetails) {\n                if (allTokenDetails.length === 0) {\n                    return;\n                }\n                var index = allTokenDetails.findIndex(function (tokenDetails) {\n                    return swRegistration.scope === tokenDetails['swScope'] && senderId === tokenDetails['fcmSenderId'];\n                });\n                if (index === -1) {\n                    return;\n                }\n                return allTokenDetails[index];\n            }).then(function (tokenDetails) {\n                if (!tokenDetails) {\n                    return;\n                }\n                return swRegistration.pushManager.getSubscription().catch(function () {\n                    throw _this3.errorFactory_.create(_errors3.default.codes.GET_SUBSCRIPTION_FAILED);\n                }).then(function (subscription) {\n                    if (subscription && _this3.isSameSubscription_(subscription, tokenDetails)) {\n                        return tokenDetails['fcmToken'];\n                    }\n                });\n            });\n        }\n        /**\n         * Creates a new FCM token.\n         */\n\n    }, {\n        key: 'createToken',\n        value: function createToken(senderId, swRegistration) {\n            var _this4 = this;\n\n            if (typeof senderId !== 'string' || senderId.length === 0) {\n                return Promise.reject(this.errorFactory_.create(_errors3.default.codes.BAD_SENDER_ID));\n            }\n            if (!(swRegistration instanceof ServiceWorkerRegistration)) {\n                return Promise.reject(this.errorFactory_.create(_errors3.default.codes.SW_REGISTRATION_EXPECTED));\n            }\n            // Check for existing subscription first\n            var subscription = void 0;\n            var fcmTokenDetails = void 0;\n            return swRegistration.pushManager.getSubscription().then(function (subscription) {\n                if (subscription) {\n                    return subscription;\n                }\n                return swRegistration.pushManager.subscribe(_fcmDetails2.default.SUBSCRIPTION_OPTIONS);\n            }).then(function (sub) {\n                subscription = sub;\n                return _this4.subscribeToFCM(senderId, subscription);\n            }).then(function (tokenDetails) {\n                fcmTokenDetails = tokenDetails;\n                return _this4.saveTokenDetails_(senderId, swRegistration, subscription, fcmTokenDetails['token'], fcmTokenDetails['pushSet']);\n            }).then(function () {\n                return fcmTokenDetails['token'];\n            });\n        }\n        /**\n         * This method deletes details of the current FCM token.\n         * It's returning a promise in case we need to move to an async\n         * method for deleting at a later date.\n         * @param {string} token Token to be deleted\n         * @return {Promise<Object>} Resolves once the FCM token details have been\n         * deleted and returns the deleted details.\n         */\n\n    }, {\n        key: 'deleteToken',\n        value: function deleteToken(token) {\n            var _this5 = this;\n\n            if (typeof token !== 'string' || token.length === 0) {\n                return Promise.reject(this.errorFactory_.create(_errors3.default.codes.INVALID_DELETE_TOKEN));\n            }\n            return this.getTokenDetailsFromToken(token).then(function (details) {\n                if (!details) {\n                    throw _this5.errorFactory_.create(_errors3.default.codes.DELETE_TOKEN_NOT_FOUND);\n                }\n                return _this5.openDatabase_().then(function (db) {\n                    return new Promise(function (resolve, reject) {\n                        var transaction = db.transaction([FCM_TOKEN_OBJ_STORE], 'readwrite');\n                        var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);\n                        var request = objectStore.delete(details['swScope']);\n                        request.onerror = function (event) {\n                            reject(event.target.error);\n                        };\n                        request.onsuccess = function (event) {\n                            if (event.target.result === 0) {\n                                reject(_this5.errorFactory_.create(_errors3.default.codes.FAILED_TO_DELETE_TOKEN));\n                                return;\n                            }\n                            resolve(details);\n                        };\n                    });\n                });\n            });\n        }\n    }]);\n\n    return TokenManager;\n}();\n\nexports.default = TokenManager;\nmodule.exports = exports['default'];\n//# sourceMappingURL=token-manager.js.map\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout() {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n})();\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch (e) {\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch (e) {\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e) {\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e) {\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while (len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) {\n    return [];\n};\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () {\n    return '/';\n};\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function () {\n    return 0;\n};\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(setImmediate) {\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function (root) {\n\n  // Store setTimeout reference so promise-polyfill will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var setTimeoutFunc = setTimeout;\n\n  function noop() {}\n\n  // Polyfill for Function.prototype.bind\n  function bind(fn, thisArg) {\n    return function () {\n      fn.apply(thisArg, arguments);\n    };\n  }\n\n  function Promise(fn) {\n    if (_typeof(this) !== 'object') throw new TypeError('Promises must be constructed via new');\n    if (typeof fn !== 'function') throw new TypeError('not a function');\n    this._state = 0;\n    this._handled = false;\n    this._value = undefined;\n    this._deferreds = [];\n\n    doResolve(fn, this);\n  }\n\n  function handle(self, deferred) {\n    while (self._state === 3) {\n      self = self._value;\n    }\n    if (self._state === 0) {\n      self._deferreds.push(deferred);\n      return;\n    }\n    self._handled = true;\n    Promise._immediateFn(function () {\n      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n      if (cb === null) {\n        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n        return;\n      }\n      var ret;\n      try {\n        ret = cb(self._value);\n      } catch (e) {\n        reject(deferred.promise, e);\n        return;\n      }\n      resolve(deferred.promise, ret);\n    });\n  }\n\n  function resolve(self, newValue) {\n    try {\n      // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n      if (newValue === self) throw new TypeError('A promise cannot be resolved with itself.');\n      if (newValue && ((typeof newValue === 'undefined' ? 'undefined' : _typeof(newValue)) === 'object' || typeof newValue === 'function')) {\n        var then = newValue.then;\n        if (newValue instanceof Promise) {\n          self._state = 3;\n          self._value = newValue;\n          finale(self);\n          return;\n        } else if (typeof then === 'function') {\n          doResolve(bind(then, newValue), self);\n          return;\n        }\n      }\n      self._state = 1;\n      self._value = newValue;\n      finale(self);\n    } catch (e) {\n      reject(self, e);\n    }\n  }\n\n  function reject(self, newValue) {\n    self._state = 2;\n    self._value = newValue;\n    finale(self);\n  }\n\n  function finale(self) {\n    if (self._state === 2 && self._deferreds.length === 0) {\n      Promise._immediateFn(function () {\n        if (!self._handled) {\n          Promise._unhandledRejectionFn(self._value);\n        }\n      });\n    }\n\n    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n      handle(self, self._deferreds[i]);\n    }\n    self._deferreds = null;\n  }\n\n  function Handler(onFulfilled, onRejected, promise) {\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n    this.promise = promise;\n  }\n\n  /**\n   * Take a potentially misbehaving resolver function and make sure\n   * onFulfilled and onRejected are only called once.\n   *\n   * Makes no guarantees about asynchrony.\n   */\n  function doResolve(fn, self) {\n    var done = false;\n    try {\n      fn(function (value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      }, function (reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      });\n    } catch (ex) {\n      if (done) return;\n      done = true;\n      reject(self, ex);\n    }\n  }\n\n  Promise.prototype['catch'] = function (onRejected) {\n    return this.then(null, onRejected);\n  };\n\n  Promise.prototype.then = function (onFulfilled, onRejected) {\n    var prom = new this.constructor(noop);\n\n    handle(this, new Handler(onFulfilled, onRejected, prom));\n    return prom;\n  };\n\n  Promise.all = function (arr) {\n    var args = Array.prototype.slice.call(arr);\n\n    return new Promise(function (resolve, reject) {\n      if (args.length === 0) return resolve([]);\n      var remaining = args.length;\n\n      function res(i, val) {\n        try {\n          if (val && ((typeof val === 'undefined' ? 'undefined' : _typeof(val)) === 'object' || typeof val === 'function')) {\n            var then = val.then;\n            if (typeof then === 'function') {\n              then.call(val, function (val) {\n                res(i, val);\n              }, reject);\n              return;\n            }\n          }\n          args[i] = val;\n          if (--remaining === 0) {\n            resolve(args);\n          }\n        } catch (ex) {\n          reject(ex);\n        }\n      }\n\n      for (var i = 0; i < args.length; i++) {\n        res(i, args[i]);\n      }\n    });\n  };\n\n  Promise.resolve = function (value) {\n    if (value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value.constructor === Promise) {\n      return value;\n    }\n\n    return new Promise(function (resolve) {\n      resolve(value);\n    });\n  };\n\n  Promise.reject = function (value) {\n    return new Promise(function (resolve, reject) {\n      reject(value);\n    });\n  };\n\n  Promise.race = function (values) {\n    return new Promise(function (resolve, reject) {\n      for (var i = 0, len = values.length; i < len; i++) {\n        values[i].then(resolve, reject);\n      }\n    });\n  };\n\n  // Use polyfill for setImmediate for performance gains\n  Promise._immediateFn = typeof setImmediate === 'function' && function (fn) {\n    setImmediate(fn);\n  } || function (fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\n  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n    if (typeof console !== 'undefined' && console) {\n      console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n    }\n  };\n\n  /**\n   * Set the immediate function to execute callbacks\n   * @param fn {function} Function to execute\n   * @deprecated\n   */\n  Promise._setImmediateFn = function _setImmediateFn(fn) {\n    Promise._immediateFn = fn;\n  };\n\n  /**\n   * Change the function to execute on unhandled rejection\n   * @param {function} fn Function to execute on unhandled rejection\n   * @deprecated\n   */\n  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n    Promise._unhandledRejectionFn = fn;\n  };\n\n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = Promise;\n  } else if (!root.Promise) {\n    root.Promise = Promise;\n  }\n})(undefined);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(22).setImmediate))\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global, process) {\n\n(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n        // Callback can either be a function or a string\n        if (typeof callback !== \"function\") {\n            callback = new Function(\"\" + callback);\n        }\n        // Copy function arguments\n        var args = new Array(arguments.length - 1);\n        for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i + 1];\n        }\n        // Store and register the task\n        var task = { callback: callback, args: args };\n        tasksByHandle[nextHandle] = task;\n        registerImmediate(nextHandle);\n        return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n            case 0:\n                callback();\n                break;\n            case 1:\n                callback(args[0]);\n                break;\n            case 2:\n                callback(args[0], args[1]);\n                break;\n            case 3:\n                callback(args[0], args[1], args[2]);\n                break;\n            default:\n                callback.apply(undefined, args);\n                break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function registerImmediate(handle) {\n            process.nextTick(function () {\n                runIfPresent(handle);\n            });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function () {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function onGlobalMessage(event) {\n            if (event.source === global && typeof event.data === \"string\" && event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function registerImmediate(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function (event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function registerImmediate(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function registerImmediate(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function registerImmediate(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n})(typeof self === \"undefined\" ? typeof global === \"undefined\" ? undefined : global : self);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9), __webpack_require__(19)))\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function () {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function () {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout = exports.clearInterval = function (timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function () {};\nTimeout.prototype.close = function () {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function (item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function (item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function (item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout) item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\n__webpack_require__(21);\nexports.setImmediate = setImmediate;\nexports.clearImmediate = clearImmediate;\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// sw.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/2017/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 384e5cb96e2e5890a4b2","/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _ERROR_MAP;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar CODES = {\n    AVAILABLE_IN_WINDOW: 'only-available-in-window',\n    AVAILABLE_IN_SW: 'only-available-in-sw',\n    SHOULD_BE_INHERITED: 'should-be-overriden',\n    BAD_SENDER_ID: 'bad-sender-id',\n    INCORRECT_GCM_SENDER_ID: 'incorrect-gcm-sender-id',\n    PERMISSION_DEFAULT: 'permission-default',\n    PERMISSION_BLOCKED: 'permission-blocked',\n    UNSUPPORTED_BROWSER: 'unsupported-browser',\n    NOTIFICATIONS_BLOCKED: 'notifications-blocked',\n    FAILED_DEFAULT_REGISTRATION: 'failed-serviceworker-registration',\n    SW_REGISTRATION_EXPECTED: 'sw-registration-expected',\n    GET_SUBSCRIPTION_FAILED: 'get-subscription-failed',\n    INVALID_SAVED_TOKEN: 'invalid-saved-token',\n    SW_REG_REDUNDANT: 'sw-reg-redundant',\n    TOKEN_SUBSCRIBE_FAILED: 'token-subscribe-failed',\n    TOKEN_SUBSCRIBE_NO_TOKEN: 'token-subscribe-no-token',\n    TOKEN_SUBSCRIBE_NO_PUSH_SET: 'token-subscribe-no-push-set',\n    USE_SW_BEFORE_GET_TOKEN: 'use-sw-before-get-token',\n    INVALID_DELETE_TOKEN: 'invalid-delete-token',\n    DELETE_TOKEN_NOT_FOUND: 'delete-token-not-found',\n    DELETE_SCOPE_NOT_FOUND: 'delete-scope-not-found',\n    BG_HANDLER_FUNCTION_EXPECTED: 'bg-handler-function-expected',\n    NO_WINDOW_CLIENT_TO_MSG: 'no-window-client-to-msg',\n    UNABLE_TO_RESUBSCRIBE: 'unable-to-resubscribe',\n    NO_FCM_TOKEN_FOR_RESUBSCRIBE: 'no-fcm-token-for-resubscribe',\n    FAILED_TO_DELETE_TOKEN: 'failed-to-delete-token',\n    NO_SW_IN_REG: 'no-sw-in-reg',\n    BAD_SCOPE: 'bad-scope',\n    BAD_VAPID_KEY: 'bad-vapid-key',\n    BAD_SUBSCRIPTION: 'bad-subscription',\n    BAD_TOKEN: 'bad-token',\n    BAD_PUSH_SET: 'bad-push-set',\n    FAILED_DELETE_VAPID_KEY: 'failed-delete-vapid-key'\n};\nvar ERROR_MAP = (_ERROR_MAP = {}, _defineProperty(_ERROR_MAP, CODES.AVAILABLE_IN_WINDOW, 'This method is available in a Window context.'), _defineProperty(_ERROR_MAP, CODES.AVAILABLE_IN_SW, 'This method is available in a service worker ' + 'context.'), _defineProperty(_ERROR_MAP, CODES.SHOULD_BE_INHERITED, 'This method should be overriden by ' + 'extended classes.'), _defineProperty(_ERROR_MAP, CODES.BAD_SENDER_ID, 'Please ensure that \\'messagingSenderId\\' is set ' + 'correctly in the options passed into firebase.initializeApp().'), _defineProperty(_ERROR_MAP, CODES.PERMISSION_DEFAULT, 'The required permissions were not granted and ' + 'dismissed instead.'), _defineProperty(_ERROR_MAP, CODES.PERMISSION_BLOCKED, 'The required permissions were not granted and ' + 'blocked instead.'), _defineProperty(_ERROR_MAP, CODES.UNSUPPORTED_BROWSER, 'This browser doesn\\'t support the API\\'s ' + 'required to use the firebase SDK.'), _defineProperty(_ERROR_MAP, CODES.NOTIFICATIONS_BLOCKED, 'Notifications have been blocked.'), _defineProperty(_ERROR_MAP, CODES.FAILED_DEFAULT_REGISTRATION, 'We are unable to register the ' + 'default service worker. {$browserErrorMessage}'), _defineProperty(_ERROR_MAP, CODES.SW_REGISTRATION_EXPECTED, 'A service worker registration was the ' + 'expected input.'), _defineProperty(_ERROR_MAP, CODES.GET_SUBSCRIPTION_FAILED, 'There was an error when trying to get ' + 'any existing Push Subscriptions.'), _defineProperty(_ERROR_MAP, CODES.INVALID_SAVED_TOKEN, 'Unable to access details of the saved token.'), _defineProperty(_ERROR_MAP, CODES.SW_REG_REDUNDANT, 'The service worker being used for push was made ' + 'redundant.'), _defineProperty(_ERROR_MAP, CODES.TOKEN_SUBSCRIBE_FAILED, 'A problem occured while subscribing the ' + 'user to FCM: {$message}'), _defineProperty(_ERROR_MAP, CODES.TOKEN_SUBSCRIBE_NO_TOKEN, 'FCM returned no token when subscribing ' + 'the user to push.'), _defineProperty(_ERROR_MAP, CODES.TOKEN_SUBSCRIBE_NO_PUSH_SET, 'FCM returned an invalid response ' + 'when getting an FCM token.'), _defineProperty(_ERROR_MAP, CODES.USE_SW_BEFORE_GET_TOKEN, 'You must call useServiceWorker() before ' + 'calling getToken() to ensure your service worker is used.'), _defineProperty(_ERROR_MAP, CODES.INVALID_DELETE_TOKEN, 'You must pass a valid token into ' + 'deleteToken(), i.e. the token from getToken().'), _defineProperty(_ERROR_MAP, CODES.DELETE_TOKEN_NOT_FOUND, 'The deletion attempt for token could not ' + 'be performed as the token was not found.'), _defineProperty(_ERROR_MAP, CODES.DELETE_SCOPE_NOT_FOUND, 'The deletion attempt for service worker ' + 'scope could not be performed as the scope was not found.'), _defineProperty(_ERROR_MAP, CODES.BG_HANDLER_FUNCTION_EXPECTED, 'The input to ' + 'setBackgroundMessageHandler() must be a function.'), _defineProperty(_ERROR_MAP, CODES.NO_WINDOW_CLIENT_TO_MSG, 'An attempt was made to message a ' + 'non-existant window client.'), _defineProperty(_ERROR_MAP, CODES.UNABLE_TO_RESUBSCRIBE, 'There was an error while re-subscribing ' + 'the FCM token for push messaging. Will have to resubscribe the ' + 'user on next visit. {$message}'), _defineProperty(_ERROR_MAP, CODES.NO_FCM_TOKEN_FOR_RESUBSCRIBE, 'Could not find an FCM token ' + 'and as a result, unable to resubscribe. Will have to resubscribe the ' + 'user on next visit.'), _defineProperty(_ERROR_MAP, CODES.FAILED_TO_DELETE_TOKEN, 'Unable to delete the currently saved token.'), _defineProperty(_ERROR_MAP, CODES.NO_SW_IN_REG, 'Even though the service worker registration was ' + 'successful, there was a problem accessing the service worker itself.'), _defineProperty(_ERROR_MAP, CODES.INCORRECT_GCM_SENDER_ID, 'Please change your web app manifest\\'s ' + '\\'gcm_sender_id\\' value to \\'103953800507\\' to use Firebase messaging.'), _defineProperty(_ERROR_MAP, CODES.BAD_SCOPE, 'The service worker scope must be a string with at ' + 'least one character.'), _defineProperty(_ERROR_MAP, CODES.BAD_VAPID_KEY, 'The public VAPID key must be a string with at ' + 'least one character.'), _defineProperty(_ERROR_MAP, CODES.BAD_SUBSCRIPTION, 'The subscription must be a valid ' + 'PushSubscription.'), _defineProperty(_ERROR_MAP, CODES.BAD_TOKEN, 'The FCM Token used for storage / lookup was not ' + 'a valid token string.'), _defineProperty(_ERROR_MAP, CODES.BAD_PUSH_SET, 'The FCM push set used for storage / lookup was not ' + 'not a valid push set string.'), _defineProperty(_ERROR_MAP, CODES.FAILED_DELETE_VAPID_KEY, 'The VAPID key could not be deleted.'), _ERROR_MAP);\nexports.default = {\n    codes: CODES,\n    map: ERROR_MAP\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=errors.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/firebase/messaging/models/errors.js","/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.patchCapture = patchCapture;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ERROR_NAME = 'FirebaseError';\nvar captureStackTrace = Error.captureStackTrace;\n// Export for faking in tests\nfunction patchCapture(captureFake) {\n    var result = captureStackTrace;\n    captureStackTrace = captureFake;\n    return result;\n}\n\nvar FirebaseError = exports.FirebaseError = function FirebaseError(code, message) {\n    _classCallCheck(this, FirebaseError);\n\n    this.code = code;\n    this.message = message;\n\n    // We want the stack value, if implemented by Error\n    if (captureStackTrace) {\n        // Patches this.stack, omitted calls above ErrorFactory#create\n        captureStackTrace(this, ErrorFactory.prototype.create);\n    } else {\n        var err = Error.apply(this, arguments);\n        this.name = ERROR_NAME;\n        // Make non-enumerable getter for the property.\n        Object.defineProperty(this, 'stack', {\n            get: function get() {\n                return err.stack;\n            }\n        });\n    }\n};\n// Back-door inheritance\n\n\nFirebaseError.prototype = Object.create(Error.prototype);\nFirebaseError.prototype.constructor = FirebaseError;\nFirebaseError.prototype.name = ERROR_NAME;\n\nvar ErrorFactory = exports.ErrorFactory = function () {\n    function ErrorFactory(service, serviceName, errors) {\n        _classCallCheck(this, ErrorFactory);\n\n        this.service = service;\n        this.serviceName = serviceName;\n        this.errors = errors;\n        // Matches {$name}, by default.\n        this.pattern = /\\{\\$([^}]+)}/g;\n        // empty\n    }\n\n    _createClass(ErrorFactory, [{\n        key: 'create',\n        value: function create(code, data) {\n            if (data === undefined) {\n                data = {};\n            }\n            var template = this.errors[code];\n            var fullCode = this.service + '/' + code;\n            var message = void 0;\n            if (template === undefined) {\n                message = \"Error\";\n            } else {\n                message = template.replace(this.pattern, function (match, key) {\n                    var value = data[key];\n                    return value !== undefined ? value.toString() : '<' + key + '?>';\n                });\n            }\n            // Service: Error message (service/code).\n            message = this.serviceName + ': ' + message + ' (' + fullCode + ').';\n            var err = new FirebaseError(fullCode, message);\n            // Populate the Error object with message parts for programmatic\n            // accesses (e.g., e.file).\n            for (var prop in data) {\n                if (!data.hasOwnProperty(prop) || prop.slice(-1) === '_') {\n                    continue;\n                }\n                err[prop] = data[prop];\n            }\n            return err;\n        }\n    }]);\n\n    return ErrorFactory;\n}();\n//# sourceMappingURL=errors.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/firebase/app/errors.js","/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _firebase_app = require('./app/firebase_app');\n\n// Export a single instance of firebase app\nvar firebase = (0, _firebase_app.createFirebaseNamespace)(); /**\n                                                             * Copyright 2017 Google Inc.\n                                                             *\n                                                             * Licensed under the Apache License, Version 2.0 (the \"License\");\n                                                             * you may not use this file except in compliance with the License.\n                                                             * You may obtain a copy of the License at\n                                                             *\n                                                             *   http://www.apache.org/licenses/LICENSE-2.0\n                                                             *\n                                                             * Unless required by applicable law or agreed to in writing, software\n                                                             * distributed under the License is distributed on an \"AS IS\" BASIS,\n                                                             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n                                                             * See the License for the specific language governing permissions and\n                                                             * limitations under the License.\n                                                             */\n// Import the createFirebaseNamespace function\nexports.default = firebase;\nmodule.exports = exports['default'];\n//# sourceMappingURL=app.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/firebase/app.js","/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\nvar scope = void 0;\nif (typeof global !== 'undefined') {\n    scope = global;\n} else if (typeof self !== 'undefined') {\n    scope = self;\n} else {\n    try {\n        scope = Function('return this')();\n    } catch (e) {\n        throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n}\nvar PromiseImpl = scope.Promise || require('promise-polyfill');\nvar local = exports.local = {\n    Promise: PromiseImpl,\n    GoogPromise: PromiseImpl\n};\n//# sourceMappingURL=shared_promise.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/firebase/app/shared_promise.js","/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.createSubscribe = createSubscribe;\nexports.async = async;\n\nvar _shared_promise = require('./shared_promise');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar LocalPromise = _shared_promise.local.Promise;\n/**\n * Helper to make a Subscribe function (just like Promise helps make a\n * Thenable).\n *\n * @param executor Function which can make calls to a single Observer\n *     as a proxy.\n * @param onNoObservers Callback when count of Observers goes to zero.\n */\nfunction createSubscribe(executor, onNoObservers) {\n    var proxy = new ObserverProxy(executor, onNoObservers);\n    return proxy.subscribe.bind(proxy);\n}\n/**\n * Implement fan-out for any number of Observers attached via a subscribe\n * function.\n */\n\nvar ObserverProxy = function () {\n    /**\n     * @param executor Function which can make calls to a single Observer\n     *     as a proxy.\n     * @param onNoObservers Callback when count of Observers goes to zero.\n     */\n    function ObserverProxy(executor, onNoObservers) {\n        var _this = this;\n\n        _classCallCheck(this, ObserverProxy);\n\n        this.observers = [];\n        this.unsubscribes = [];\n        this.observerCount = 0;\n        // Micro-task scheduling by calling task.then().\n        this.task = LocalPromise.resolve();\n        this.finalized = false;\n        this.onNoObservers = onNoObservers;\n        // Call the executor asynchronously so subscribers that are called\n        // synchronously after the creation of the subscribe function\n        // can still receive the very first value generated in the executor.\n        this.task.then(function () {\n            executor(_this);\n        }).catch(function (e) {\n            _this.error(e);\n        });\n    }\n\n    _createClass(ObserverProxy, [{\n        key: 'next',\n        value: function next(value) {\n            this.forEachObserver(function (observer) {\n                observer.next(value);\n            });\n        }\n    }, {\n        key: 'error',\n        value: function error(_error) {\n            this.forEachObserver(function (observer) {\n                observer.error(_error);\n            });\n            this.close(_error);\n        }\n    }, {\n        key: 'complete',\n        value: function complete() {\n            this.forEachObserver(function (observer) {\n                observer.complete();\n            });\n            this.close();\n        }\n        /**\n         * Subscribe function that can be used to add an Observer to the fan-out list.\n         *\n         * - We require that no event is sent to a subscriber sychronously to their\n         *   call to subscribe().\n         */\n\n    }, {\n        key: 'subscribe',\n        value: function subscribe(nextOrObserver, error, complete) {\n            var _this2 = this;\n\n            var observer = void 0;\n            if (nextOrObserver === undefined && error === undefined && complete === undefined) {\n                throw new Error(\"Missing Observer.\");\n            }\n            // Assemble an Observer object when passed as callback functions.\n            if (implementsAnyMethods(nextOrObserver, ['next', 'error', 'complete'])) {\n                observer = nextOrObserver;\n            } else {\n                observer = {\n                    next: nextOrObserver,\n                    error: error,\n                    complete: complete\n                };\n            }\n            if (observer.next === undefined) {\n                observer.next = noop;\n            }\n            if (observer.error === undefined) {\n                observer.error = noop;\n            }\n            if (observer.complete === undefined) {\n                observer.complete = noop;\n            }\n            var unsub = this.unsubscribeOne.bind(this, this.observers.length);\n            // Attempt to subscribe to a terminated Observable - we\n            // just respond to the Observer with the final error or complete\n            // event.\n            if (this.finalized) {\n                this.task.then(function () {\n                    try {\n                        if (_this2.finalError) {\n                            observer.error(_this2.finalError);\n                        } else {\n                            observer.complete();\n                        }\n                    } catch (e) {\n                        // nothing\n                    }\n                });\n            }\n            this.observers.push(observer);\n            return unsub;\n        }\n        // Unsubscribe is synchronous - we guarantee that no events are sent to\n        // any unsubscribed Observer.\n\n    }, {\n        key: 'unsubscribeOne',\n        value: function unsubscribeOne(i) {\n            if (this.observers === undefined || this.observers[i] === undefined) {\n                return;\n            }\n            delete this.observers[i];\n            this.observerCount -= 1;\n            if (this.observerCount === 0 && this.onNoObservers !== undefined) {\n                this.onNoObservers(this);\n            }\n        }\n    }, {\n        key: 'forEachObserver',\n        value: function forEachObserver(fn) {\n            if (this.finalized) {\n                // Already closed by previous event....just eat the additional values.\n                return;\n            }\n            // Since sendOne calls asynchronously - there is no chance that\n            // this.observers will become undefined.\n            for (var i = 0; i < this.observers.length; i++) {\n                this.sendOne(i, fn);\n            }\n        }\n        // Call the Observer via one of it's callback function. We are careful to\n        // confirm that the observe has not been unsubscribed since this asynchronous\n        // function had been queued.\n\n    }, {\n        key: 'sendOne',\n        value: function sendOne(i, fn) {\n            var _this3 = this;\n\n            // Execute the callback asynchronously\n            this.task.then(function () {\n                if (_this3.observers !== undefined && _this3.observers[i] !== undefined) {\n                    try {\n                        fn(_this3.observers[i]);\n                    } catch (e) {\n                        // Ignore exceptions raised in Observers or missing methods of an\n                        // Observer.\n                        // Log error to console. b/31404806\n                        if (typeof console !== \"undefined\" && console.error) {\n                            console.error(e);\n                        }\n                    }\n                }\n            });\n        }\n    }, {\n        key: 'close',\n        value: function close(err) {\n            var _this4 = this;\n\n            if (this.finalized) {\n                return;\n            }\n            this.finalized = true;\n            if (err !== undefined) {\n                this.finalError = err;\n            }\n            // Proxy is no longer needed - garbage collect references\n            this.task.then(function () {\n                _this4.observers = undefined;\n                _this4.onNoObservers = undefined;\n            });\n        }\n    }]);\n\n    return ObserverProxy;\n}();\n/** Turn synchronous function into one called asynchronously. */\n\n\nfunction async(fn, onError) {\n    return function () {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        LocalPromise.resolve(true).then(function () {\n            fn.apply(undefined, args);\n        }).catch(function (error) {\n            if (onError) {\n                onError(error);\n            }\n        });\n    };\n}\n/**\n * Return true if the object passed in implements any of the named methods.\n */\nfunction implementsAnyMethods(obj, methods) {\n    if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object' || obj === null) {\n        return false;\n    }\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n        for (var _iterator = methods[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var method = _step.value;\n\n            if (method in obj && typeof obj[method] === 'function') {\n                return true;\n            }\n        }\n    } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n            }\n        } finally {\n            if (_didIteratorError) {\n                throw _iteratorError;\n            }\n        }\n    }\n\n    return false;\n}\nfunction noop() {\n    // do nothing\n}\n//# sourceMappingURL=subscribe.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/firebase/app/subscribe.js","/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _errors = require('../../app/errors');\n\nvar _errors2 = require('../models/errors');\n\nvar _errors3 = _interopRequireDefault(_errors2);\n\nvar _tokenManager = require('../models/token-manager');\n\nvar _tokenManager2 = _interopRequireDefault(_tokenManager);\n\nvar _notificationPermission = require('../models/notification-permission');\n\nvar _notificationPermission2 = _interopRequireDefault(_notificationPermission);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SENDER_ID_OPTION_NAME = 'messagingSenderId';\n\nvar ControllerInterface = function () {\n    /**\n     * An interface of the Messaging Service API\n     * @param {!firebase.app.App} app\n     */\n    function ControllerInterface(app) {\n        var _this = this;\n\n        _classCallCheck(this, ControllerInterface);\n\n        this.errorFactory_ = new _errors.ErrorFactory('messaging', 'Messaging', _errors3.default.map);\n        if (!app.options[SENDER_ID_OPTION_NAME] || typeof app.options[SENDER_ID_OPTION_NAME] !== 'string') {\n            throw this.errorFactory_.create(_errors3.default.codes.BAD_SENDER_ID);\n        }\n        this.messagingSenderId_ = app.options[SENDER_ID_OPTION_NAME];\n        this.tokenManager_ = new _tokenManager2.default();\n        this.app = app;\n        this.INTERNAL = {};\n        this.INTERNAL.delete = function () {\n            return _this.delete;\n        };\n    }\n    /**\n     * @export\n     * @return {Promise<string> | Promise<null>} Returns a promise that\n     * resolves to an FCM token.\n     */\n\n\n    _createClass(ControllerInterface, [{\n        key: 'getToken',\n        value: function getToken() {\n            var _this2 = this;\n\n            // Check with permissions\n            var currentPermission = this.getNotificationPermission_();\n            if (currentPermission !== _notificationPermission2.default.granted) {\n                if (currentPermission === _notificationPermission2.default.denied) {\n                    return Promise.reject(this.errorFactory_.create(_errors3.default.codes.NOTIFICATIONS_BLOCKED));\n                }\n                // We must wait for permission to be granted\n                return Promise.resolve(null);\n            }\n            return this.getSWRegistration_().then(function (registration) {\n                return _this2.tokenManager_.getSavedToken(_this2.messagingSenderId_, registration).then(function (token) {\n                    if (token) {\n                        return token;\n                    }\n                    return _this2.tokenManager_.createToken(_this2.messagingSenderId_, registration);\n                });\n            });\n        }\n        /**\n         * This method deletes tokens that the token manager looks after and then\n         * unregisters the push subscription if it exists.\n         * @export\n         * @param {string} token\n         * @return {Promise<void>}\n         */\n\n    }, {\n        key: 'deleteToken',\n        value: function deleteToken(token) {\n            var _this3 = this;\n\n            return this.tokenManager_.deleteToken(token).then(function () {\n                return _this3.getSWRegistration_().then(function (registration) {\n                    if (registration) {\n                        return registration.pushManager.getSubscription();\n                    }\n                }).then(function (subscription) {\n                    if (subscription) {\n                        return subscription.unsubscribe();\n                    }\n                });\n            });\n        }\n    }, {\n        key: 'getSWRegistration_',\n        value: function getSWRegistration_() {\n            throw this.errorFactory_.create(_errors3.default.codes.SHOULD_BE_INHERITED);\n        }\n        //\n        // The following methods should only be available in the window.\n        //\n\n    }, {\n        key: 'requestPermission',\n        value: function requestPermission() {\n            throw this.errorFactory_.create(_errors3.default.codes.AVAILABLE_IN_WINDOW);\n        }\n        /**\n         * @export\n         * @param {!ServiceWorkerRegistration} registration\n         */\n\n    }, {\n        key: 'useServiceWorker',\n        value: function useServiceWorker() {\n            throw this.errorFactory_.create(_errors3.default.codes.AVAILABLE_IN_WINDOW);\n        }\n        /**\n         * @export\n         * @param {!firebase.Observer|function(*)} nextOrObserver\n         * @param {function(!Error)=} optError\n         * @param {function()=} optCompleted\n         * @return {!function()}\n         */\n\n    }, {\n        key: 'onMessage',\n        value: function onMessage() {\n            throw this.errorFactory_.create(_errors3.default.codes.AVAILABLE_IN_WINDOW);\n        }\n        /**\n         * @export\n         * @param {!firebase.Observer|function()} nextOrObserver An observer object\n         * or a function triggered on token refresh.\n         * @param {function(!Error)=} optError Optional A function\n         * triggered on token refresh error.\n         * @param {function()=} optCompleted Optional function triggered when the\n         * observer is removed.\n         * @return {!function()} The unsubscribe function for the observer.\n         */\n\n    }, {\n        key: 'onTokenRefresh',\n        value: function onTokenRefresh() {\n            throw this.errorFactory_.create(_errors3.default.codes.AVAILABLE_IN_WINDOW);\n        }\n        //\n        // The following methods are used by the service worker only.\n        //\n        /**\n         * @export\n         * @param {function(Object)} callback\n         */\n\n    }, {\n        key: 'setBackgroundMessageHandler',\n        value: function setBackgroundMessageHandler() {\n            throw this.errorFactory_.create(_errors3.default.codes.AVAILABLE_IN_SW);\n        }\n        //\n        // The following methods are used by the service themselves and not exposed\n        // publicly or not expected to be used by developers.\n        //\n        /**\n         * This method is required to adhere to the Firebase interface.\n         * It closes any currently open indexdb database connections.\n         */\n\n    }, {\n        key: 'delete',\n        value: function _delete() {\n            this.tokenManager_.closeDatabase();\n        }\n        /**\n         * Returns the current Notification Permission state.\n         * @private\n         * @return {string} The currenct permission state.\n         */\n\n    }, {\n        key: 'getNotificationPermission_',\n        value: function getNotificationPermission_() {\n            return Notification.permission;\n        }\n        /**\n         * @protected\n         * @returns {TokenManager}\n         */\n\n    }, {\n        key: 'getTokenManager',\n        value: function getTokenManager() {\n            return this.tokenManager_;\n        }\n    }]);\n\n    return ControllerInterface;\n}();\n\nexports.default = ControllerInterface;\nmodule.exports = exports['default'];\n//# sourceMappingURL=controller-interface.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/firebase/messaging/controllers/controller-interface.js","/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar FCM_APPLICATION_SERVER_KEY = [0x04, 0x33, 0x94, 0xF7, 0xDF, 0xA1, 0xEB, 0xB1, 0xDC, 0x03, 0xA2, 0x5E, 0x15, 0x71, 0xDB, 0x48, 0xD3, 0x2E, 0xED, 0xED, 0xB2, 0x34, 0xDB, 0xB7, 0x47, 0x3A, 0x0C, 0x8F, 0xC4, 0xCC, 0xE1, 0x6F, 0x3C, 0x8C, 0x84, 0xDF, 0xAB, 0xB6, 0x66, 0x3E, 0xF2, 0x0C, 0xD4, 0x8B, 0xFE, 0xE3, 0xF9, 0x76, 0x2F, 0x14, 0x1C, 0x63, 0x08, 0x6A, 0x6F, 0x2D, 0xB1, 0x1A, 0x95, 0xB0, 0xCE, 0x37, 0xC0, 0x9C, 0x6E];\nvar SUBSCRIPTION_DETAILS = {\n    'userVisibleOnly': true,\n    'applicationServerKey': new Uint8Array(FCM_APPLICATION_SERVER_KEY)\n};\nexports.default = {\n    ENDPOINT: 'https://fcm.googleapis.com',\n    APPLICATION_SERVER_KEY: FCM_APPLICATION_SERVER_KEY,\n    SUBSCRIPTION_OPTIONS: SUBSCRIPTION_DETAILS\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=fcm-details.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/firebase/messaging/models/fcm-details.js","/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    granted: 'granted',\n    default: 'default',\n    denied: 'denied'\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=notification-permission.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/firebase/messaging/models/notification-permission.js","/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n// These fields are strings to prevent closure from thinking goog.getMsg\n// should be used to initialise the values\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar PARAMS = {\n    TYPE_OF_MSG: 'firebase-messaging-msg-type',\n    DATA: 'firebase-messaging-msg-data'\n};\n// This value isn't using the TYPE_OF_MSG short hand as closure\n// expects the variable to be defined via goog.getMsg\nvar msgType = {\n    PUSH_MSG_RECEIVED: 'push-msg-received',\n    NOTIFICATION_CLICKED: 'notification-clicked'\n};\nvar createNewMsg = function (msgType, msgData) {\n    var _message;\n\n    var message = (_message = {}, _defineProperty(_message, PARAMS.TYPE_OF_MSG, msgType), _defineProperty(_message, PARAMS.DATA, msgData), _message);\n    return message;\n};\nexports.default = {\n    PARAMS: PARAMS,\n    TYPES_OF_MSG: msgType,\n    createNewMsg: createNewMsg\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=worker-page-message.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/firebase/messaging/models/worker-page-message.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/global.js","/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.registerMessaging = registerMessaging;\n\nvar _windowController = require('./messaging/controllers/window-controller');\n\nvar _windowController2 = _interopRequireDefault(_windowController);\n\nvar _swController = require('./messaging/controllers/sw-controller');\n\nvar _swController2 = _interopRequireDefault(_swController);\n\nvar _app = require('./app');\n\nvar _app2 = _interopRequireDefault(_app);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction registerMessaging(instance) {\n    instance.INTERNAL.registerService('messaging', function factoryMethod(app) {\n        if (self && 'ServiceWorkerGlobalScope' in self) {\n            return new _swController2.default(app);\n        }\n        // Assume we are in the window context.\n        return new _windowController2.default(app);\n    }, {\n        // no-inline\n        'Messaging': _windowController2.default\n    });\n}\nregisterMessaging(_app2.default);\n//# sourceMappingURL=messaging.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/firebase/messaging.js","import firebase from 'firebase/app';\nimport 'firebase/messaging';\n\n/* globals self */\n\nfirebase.initializeApp({\n  messagingSenderId: process.env.FIREBASE_MESSAGING_SENDER_ID,\n});\n\nconst messaging = firebase.messaging();\n\nmessaging.setBackgroundMessageHandler(payload => self.registration.showNotification(payload.notification.title, {\n  icon: 'https://hkoscon.org/logo.png',\n  body: payload.notifications.body,\n  vibrate: [500, 100, 500],\n}));\n\nself.addEventListener('notificationclick', (event) => {\n  event.notification.close();\n  event.waitUntil(self.clients.matchAll({\n    type: 'window',\n  }).then((clients) => {\n    for (const client of clients) {\n      if ('focus' in client) {\n        return client.focus();\n      }\n    }\n    return self.clients.openWindow('/2017/');\n  }));\n});\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/sw.js","/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.deepCopy = deepCopy;\nexports.deepExtend = deepExtend;\nexports.patchProperty = patchProperty;\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n/**\n * Do a deep-copy of basic JavaScript Objects or Arrays.\n */\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/function deepCopy(value) {\n    return deepExtend(undefined, value);\n}\n/**\n * Copy properties from source to target (recursively allows extension\n * of Objects and Arrays).  Scalar values in the target are over-written.\n * If target is undefined, an object of the appropriate type will be created\n * (and returned).\n *\n * We recursively copy all child properties of plain Objects in the source- so\n * that namespace- like dictionaries are merged.\n *\n * Note that the target can be a function, in which case the properties in\n * the source Object are copied onto it as static properties of the Function.\n */\nfunction deepExtend(target, source) {\n    if (!(source instanceof Object)) {\n        return source;\n    }\n    switch (source.constructor) {\n        case Date:\n            return new Date(source.getTime());\n            // Treat Dates like scalars; if the target date object had any child\n            // properties - they will be lost!\n\n        case Object:\n            if (target === undefined) {\n                target = {};\n            }\n            break;\n        case Array:\n            // Always copy the array source and overwrite the target.\n            target = [];\n            break;\n        default:\n            // Not a plain Object - treat it as a scalar.\n            return source;\n    }\n    for (var prop in source) {\n        if (!source.hasOwnProperty(prop)) {\n            continue;\n        }\n        target[prop] = deepExtend(target[prop], source[prop]);\n    }\n    return target;\n}\n// TODO: Really needed (for JSCompiler type checking)?\nfunction patchProperty(obj, prop, value) {\n    obj[prop] = value;\n}\n//# sourceMappingURL=deep_copy.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/firebase/app/deep_copy.js","/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * Copyright 2017 Google Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * Licensed under the Apache License, Version 2.0 (the \"License\");\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * you may not use this file except in compliance with the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * Unless required by applicable law or agreed to in writing, software\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * distributed under the License is distributed on an \"AS IS\" BASIS,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * See the License for the specific language governing permissions and\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * limitations under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     */\n\n\nexports.createFirebaseNamespace = createFirebaseNamespace;\n\nvar _subscribe = require('./subscribe');\n\nvar _errors = require('./errors');\n\nvar _shared_promise = require('./shared_promise');\n\nvar _deep_copy = require('./deep_copy');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar LocalPromise = _shared_promise.local.Promise;\nvar DEFAULT_ENTRY_NAME = '[DEFAULT]';\n// An array to capture listeners before the true auth functions\n// exist\nvar tokenListeners = [];\n/**\n * Global context object for a collection of services using\n * a shared authentication state.\n */\n\nvar FirebaseAppImpl = function () {\n    function FirebaseAppImpl(options, name, firebase_) {\n        _classCallCheck(this, FirebaseAppImpl);\n\n        this.firebase_ = firebase_;\n        this.isDeleted_ = false;\n        this.services_ = {};\n        this.name_ = name;\n        this.options_ = (0, _deep_copy.deepCopy)(options);\n    }\n\n    _createClass(FirebaseAppImpl, [{\n        key: 'delete',\n        value: function _delete() {\n            var _this = this;\n\n            return new LocalPromise(function (resolve) {\n                _this.checkDestroyed_();\n                resolve();\n            }).then(function () {\n                _this.firebase_.INTERNAL.removeApp(_this.name_);\n                var services = [];\n                Object.keys(_this.services_).forEach(function (serviceKey) {\n                    Object.keys(_this.services_[serviceKey]).forEach(function (instanceKey) {\n                        services.push(_this.services_[serviceKey][instanceKey]);\n                    });\n                });\n                return LocalPromise.all(services.map(function (service) {\n                    return service.INTERNAL.delete();\n                }));\n            }).then(function () {\n                _this.isDeleted_ = true;\n                _this.services_ = {};\n            });\n        }\n        /**\n         * Return a service instance associated with this app (creating it\n         * on demand), identified by the passed instanceIdentifier.\n         *\n         * NOTE: Currently storage is the only one that is leveraging this\n         * functionality. They invoke it by calling:\n         *\n         * ```javascript\n         * firebase.app().storage('STORAGE BUCKET ID')\n         * ```\n         *\n         * The service name is passed to this already\n         * @internal\n         */\n\n    }, {\n        key: '_getService',\n        value: function _getService(name) {\n            var instanceIdentifier = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_ENTRY_NAME;\n\n            this.checkDestroyed_();\n            if (!this.services_[name]) {\n                this.services_[name] = {};\n            }\n            if (!this.services_[name][instanceIdentifier]) {\n                /**\n                 * If a custom instance has been defined (i.e. not '[DEFAULT]')\n                 * then we will pass that instance on, otherwise we pass `null`\n                 */\n                var instanceSpecifier = instanceIdentifier !== DEFAULT_ENTRY_NAME ? instanceIdentifier : undefined;\n                var service = this.firebase_.INTERNAL.factories[name](this, this.extendApp.bind(this), instanceSpecifier);\n                this.services_[name][instanceIdentifier] = service;\n            }\n            return this.services_[name][instanceIdentifier];\n        }\n        /**\n         * Callback function used to extend an App instance at the time\n         * of service instance creation.\n         */\n\n    }, {\n        key: 'extendApp',\n        value: function extendApp(props) {\n            var _this2 = this;\n\n            // Copy the object onto the FirebaseAppImpl prototype\n            (0, _deep_copy.deepExtend)(FirebaseAppImpl.prototype, props);\n            /**\n             * If the app has overwritten the addAuthTokenListener stub, forward\n             * the active token listeners on to the true fxn.\n             *\n             * TODO: This function is required due to our current module\n             * structure. Once we are able to rely strictly upon a single module\n             * implementation, this code should be refactored and Auth should\n             * provide these stubs and the upgrade logic\n             */\n            if (props.INTERNAL && props.INTERNAL.addAuthTokenListener) {\n                tokenListeners.forEach(function (listener) {\n                    _this2.INTERNAL.addAuthTokenListener(listener);\n                });\n                tokenListeners = [];\n            }\n        }\n        /**\n         * This function will throw an Error if the App has already been deleted -\n         * use before performing API actions on the App.\n         */\n\n    }, {\n        key: 'checkDestroyed_',\n        value: function checkDestroyed_() {\n            if (this.isDeleted_) {\n                error('app-deleted', { 'name': this.name_ });\n            }\n        }\n    }, {\n        key: 'name',\n        get: function get() {\n            this.checkDestroyed_();\n            return this.name_;\n        }\n    }, {\n        key: 'options',\n        get: function get() {\n            this.checkDestroyed_();\n            return this.options_;\n        }\n    }]);\n\n    return FirebaseAppImpl;\n}();\n\nFirebaseAppImpl.prototype.INTERNAL = {\n    'getUid': function getUid() {\n        return null;\n    },\n    'getToken': function getToken() {\n        return LocalPromise.resolve(null);\n    },\n    'addAuthTokenListener': function addAuthTokenListener(callback) {\n        tokenListeners.push(callback);\n        // Make sure callback is called, asynchronously, in the absence of the auth module\n        setTimeout(function () {\n            return callback(null);\n        }, 0);\n    },\n    'removeAuthTokenListener': function removeAuthTokenListener(callback) {\n        tokenListeners = tokenListeners.filter(function (listener) {\n            return listener !== callback;\n        });\n    }\n};\n// Prevent dead-code elimination of these methods w/o invalid property\n// copying.\nFirebaseAppImpl.prototype.name && FirebaseAppImpl.prototype.options || FirebaseAppImpl.prototype.delete || console.log(\"dc\");\n/**\n * Return a firebase namespace object.\n *\n * In production, this will be called exactly once and the result\n * assigned to the 'firebase' global.  It may be called multiple times\n * in unit tests.\n */\nfunction createFirebaseNamespace() {\n    var apps_ = {};\n    var factories = {};\n    var appHooks = {};\n    // A namespace is a plain JavaScript Object.\n    var namespace = {\n        // Hack to prevent Babel from modifying the object returned\n        // as the firebase namespace.\n        '__esModule': true,\n        'initializeApp':\n        /**\n         * Create a new App instance (name must be unique).\n         */\n        function (options, name) {\n            if (name === undefined) {\n                name = DEFAULT_ENTRY_NAME;\n            } else {\n                if (typeof name !== 'string' || name === '') {\n                    error('bad-app-name', { 'name': name + '' });\n                }\n            }\n            if (apps_[name] !== undefined) {\n                error('duplicate-app', { 'name': name });\n            }\n            var app = new FirebaseAppImpl(options, name, namespace);\n            apps_[name] = app;\n            callAppHooks(app, 'create');\n            return app;\n        }\n        /*\n         * Return an array of all the non-deleted FirebaseApps.\n         */\n        ,\n        'app': app,\n        'apps': null,\n        'Promise': LocalPromise,\n        'SDK_VERSION': '4.1.1',\n        'INTERNAL': {\n            'registerService':\n            /*\n             * Register a Firebase Service.\n             *\n             * firebase.INTERNAL.registerService()\n             *\n             * TODO: Implement serviceProperties.\n             */\n            function (name, createService, serviceProperties, appHook, allowMultipleInstances) {\n                // Cannot re-register a service that already exists\n                if (factories[name]) {\n                    error('duplicate-service', { 'name': name });\n                }\n                // Capture the service factory for later service instantiation\n                factories[name] = createService;\n                // Capture the appHook, if passed\n                if (appHook) {\n                    appHooks[name] = appHook;\n                    // Run the **new** app hook on all existing apps\n                    getApps().forEach(function (app) {\n                        appHook('create', app);\n                    });\n                }\n                // The Service namespace is an accessor function ...\n                var serviceNamespace = function () {\n                    var appArg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : app();\n\n                    if (typeof appArg[name] !== 'function') {\n                        // Invalid argument.\n                        // This happens in the following case: firebase.storage('gs:/')\n                        error('invalid-app-argument', { 'name': name });\n                    }\n                    // Forward service instance lookup to the FirebaseApp.\n                    return appArg[name]();\n                };\n                // ... and a container for service-level properties.\n                if (serviceProperties !== undefined) {\n                    (0, _deep_copy.deepExtend)(serviceNamespace, serviceProperties);\n                }\n                // Monkey-patch the serviceNamespace onto the firebase namespace\n                namespace[name] = serviceNamespace;\n                // Patch the FirebaseAppImpl prototype\n                FirebaseAppImpl.prototype[name] = function () {\n                    var serviceFxn = this._getService.bind(this, name);\n\n                    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n                        args[_key] = arguments[_key];\n                    }\n\n                    return serviceFxn.apply(this, allowMultipleInstances ? args : []);\n                };\n                return serviceNamespace;\n            }\n            /**\n             * Patch the top-level firebase namespace with additional properties.\n             *\n             * firebase.INTERNAL.extendNamespace()\n             */\n            ,\n            'createFirebaseNamespace': createFirebaseNamespace,\n            'extendNamespace': function (props) {\n                (0, _deep_copy.deepExtend)(namespace, props);\n            },\n            'createSubscribe': _subscribe.createSubscribe,\n            'ErrorFactory': _errors.ErrorFactory,\n            'removeApp':\n            /**\n             * Called by App.delete() - but before any services associated with the App\n             * are deleted.\n             */\n            function (name) {\n                var app = apps_[name];\n                callAppHooks(app, 'delete');\n                delete apps_[name];\n            }\n            /**\n             * Get the App object for a given name (or DEFAULT).\n             */\n            ,\n            'factories': factories,\n            'useAsService': useAsService,\n            'Promise': _shared_promise.local.GoogPromise,\n            'deepExtend': _deep_copy.deepExtend\n        }\n    };\n    // Inject a circular default export to allow Babel users who were previously\n    // using:\n    //\n    //   import firebase from 'firebase';\n    //   which becomes: var firebase = require('firebase').default;\n    //\n    // instead of\n    //\n    //   import * as firebase from 'firebase';\n    //   which becomes: var firebase = require('firebase');\n    (0, _deep_copy.patchProperty)(namespace, 'default', namespace);\n    // firebase.apps is a read-only getter.\n    Object.defineProperty(namespace, 'apps', {\n        get: getApps\n    });function app(name) {\n        name = name || DEFAULT_ENTRY_NAME;\n        var result = apps_[name];\n        if (result === undefined) {\n            error('no-app', { 'name': name });\n        }\n        return result;\n    }\n    (0, _deep_copy.patchProperty)(app, 'App', FirebaseAppImpl);function getApps() {\n        // Make a copy so caller cannot mutate the apps list.\n        return Object.keys(apps_).map(function (name) {\n            return apps_[name];\n        });\n    }\n    function callAppHooks(app, eventName) {\n        Object.keys(factories).forEach(function (serviceName) {\n            // Ignore virtual services\n            var factoryName = useAsService(app, serviceName);\n            if (factoryName === null) {\n                return;\n            }\n            if (appHooks[factoryName]) {\n                appHooks[factoryName](eventName, app);\n            }\n        });\n    }\n    // Map the requested service to a registered service name\n    // (used to map auth to serverAuth service when needed).\n    function useAsService(app, name) {\n        if (name === 'serverAuth') {\n            return null;\n        }\n        app.options;\n\n        return name;\n    }\n    return namespace;\n}\nfunction error(code, args) {\n    throw appErrors.create(code, args);\n}\n// TypeScript does not support non-string indexes!\n// let errors: {[code: AppError: string} = {\nvar errors = {\n    'no-app': 'No Firebase App \\'{$name}\\' has been created - ' + 'call Firebase App.initializeApp()',\n    'bad-app-name': 'Illegal App name: \\'{$name}',\n    'duplicate-app': 'Firebase App named \\'{$name}\\' already exists',\n    'app-deleted': 'Firebase App named \\'{$name}\\' already deleted',\n    'duplicate-service': 'Firebase service named \\'{$name}\\' already registered',\n    'sa-not-supported': 'Initializing the Firebase SDK with a service ' + 'account is only allowed in a Node.js environment. On client ' + 'devices, you should instead initialize the SDK with an api key and ' + 'auth domain',\n    'invalid-app-argument': 'firebase.{$name}() takes either no argument or a ' + 'Firebase App instance.'\n};\nvar appErrors = new _errors.ErrorFactory('app', 'Firebase', errors);\n//# sourceMappingURL=firebase_app.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/firebase/app/firebase_app.js","/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _controllerInterface = require('./controller-interface');\n\nvar _controllerInterface2 = _interopRequireDefault(_controllerInterface);\n\nvar _errors = require('../models/errors');\n\nvar _errors2 = _interopRequireDefault(_errors);\n\nvar _workerPageMessage = require('../models/worker-page-message');\n\nvar _workerPageMessage2 = _interopRequireDefault(_workerPageMessage);\n\nvar _fcmDetails = require('../models/fcm-details');\n\nvar _fcmDetails2 = _interopRequireDefault(_fcmDetails);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar FCM_MSG = 'FCM_MSG';\n\nvar SWController = function (_ControllerInterface) {\n    _inherits(SWController, _ControllerInterface);\n\n    function SWController(app) {\n        _classCallCheck(this, SWController);\n\n        var _this = _possibleConstructorReturn(this, (SWController.__proto__ || Object.getPrototypeOf(SWController)).call(this, app));\n\n        self.addEventListener('push', function (e) {\n            return _this.onPush_(e);\n        }, false);\n        self.addEventListener('pushsubscriptionchange', function (e) {\n            return _this.onSubChange_(e);\n        }, false);\n        self.addEventListener('notificationclick', function (e) {\n            return _this.onNotificationClick_(e);\n        }, false);\n        /**\n         * @private\n         * @type {function(Object)|null}\n         */\n        _this.bgMessageHandler_ = null;\n        return _this;\n    }\n    /**\n    * A handler for push events that shows notifications based on the content of\n    * the payload.\n    *\n    * The payload must be a JSON-encoded Object with a `notification` key. The\n    * value of the `notification` property will be used as the NotificationOptions\n    * object passed to showNotification. Additionally, the `title` property of the\n    * notification object will be used as the title.\n    *\n    * If there is no notification data in the payload then no notification will be\n    * shown.\n    * @private\n    */\n\n\n    _createClass(SWController, [{\n        key: 'onPush_',\n        value: function onPush_(event) {\n            var _this2 = this;\n\n            var msgPayload = void 0;\n            try {\n                msgPayload = event.data.json();\n            } catch (err) {\n                // Not JSON so not an FCM message\n                return;\n            }\n            var handleMsgPromise = this.hasVisibleClients_().then(function (hasVisibleClients) {\n                if (hasVisibleClients) {\n                    // Do not need to show a notification.\n                    if (msgPayload.notification || _this2.bgMessageHandler_) {\n                        // Send to page\n                        return _this2.sendMessageToWindowClients_(msgPayload);\n                    }\n                    return;\n                }\n                var notificationDetails = _this2.getNotificationData_(msgPayload);\n                if (notificationDetails) {\n                    var notificationTitle = notificationDetails.title || '';\n                    return self.registration.showNotification(notificationTitle, notificationDetails);\n                } else if (_this2.bgMessageHandler_) {\n                    return _this2.bgMessageHandler_(msgPayload);\n                }\n            });\n            event.waitUntil(handleMsgPromise);\n        }\n        /**\n        * @private\n        */\n\n    }, {\n        key: 'onSubChange_',\n        value: function onSubChange_(event) {\n            var _this3 = this;\n\n            var promiseChain = this.getToken().then(function (token) {\n                if (!token) {\n                    // We can't resubscribe if we don't have an FCM token for this scope.\n                    throw _this3.errorFactory_.create(_errors2.default.codes.NO_FCM_TOKEN_FOR_RESUBSCRIBE);\n                }\n                var tokenDetails = null;\n                var tokenManager = _this3.getTokenManager();\n                return tokenManager.getTokenDetailsFromToken(token).then(function (details) {\n                    tokenDetails = details;\n                    if (!tokenDetails) {\n                        throw _this3.errorFactory_.create(_errors2.default.codes.INVALID_SAVED_TOKEN);\n                    }\n                    // Attempt to get a new subscription\n                    return self.registration.pushManager.subscribe(_fcmDetails2.default.SUBSCRIPTION_OPTIONS);\n                }).then(function (newSubscription) {\n                    // Send new subscription to FCM.\n                    return tokenManager.subscribeToFCM(tokenDetails.fcmSenderId, newSubscription, tokenDetails.fcmPushSet);\n                }).catch(function (err) {\n                    // The best thing we can do is log this to the terminal so\n                    // developers might notice the error.\n                    return tokenManager.deleteToken(tokenDetails.fcmToken).then(function () {\n                        throw _this3.errorFactory_.create(_errors2.default.codes.UNABLE_TO_RESUBSCRIBE, {\n                            'message': err\n                        });\n                    });\n                });\n            });\n            event.waitUntil(promiseChain);\n        }\n        /**\n        * @private\n        */\n\n    }, {\n        key: 'onNotificationClick_',\n        value: function onNotificationClick_(event) {\n            var _this4 = this;\n\n            if (!(event.notification && event.notification.data && event.notification.data[FCM_MSG])) {\n                // Not an FCM notification, do nothing.\n                return;\n            }\n            // Prevent other listeners from receiving the event\n            event.stopImmediatePropagation();\n            event.notification.close();\n            var msgPayload = event.notification.data[FCM_MSG];\n            var clickAction = msgPayload['notification']['click_action'];\n            if (!clickAction) {\n                // Nothing to do.\n                return;\n            }\n            var promiseChain = this.getWindowClient_(clickAction).then(function (windowClient) {\n                if (!windowClient) {\n                    // Unable to find window client so need to open one.\n                    return self.clients.openWindow(clickAction);\n                }\n                return windowClient;\n            }).then(function (windowClient) {\n                if (!windowClient) {\n                    // Window Client will not be returned if it's for a third party origin.\n                    return;\n                }\n                // Delete notification data from payload before sending to the page.\n                msgPayload['notification'];\n\n                delete msgPayload['notification'];\n                var internalMsg = _workerPageMessage2.default.createNewMsg(_workerPageMessage2.default.TYPES_OF_MSG.NOTIFICATION_CLICKED, msgPayload);\n                // Attempt to send a message to the client to handle the data\n                // Is affected by: https://github.com/slightlyoff/ServiceWorker/issues/728\n                return _this4.attemptToMessageClient_(windowClient, internalMsg);\n            });\n            event.waitUntil(promiseChain);\n        }\n        /**\n         * @private\n         * @param {Object} msgPayload\n         * @return {NotificationOptions|undefined}\n         */\n\n    }, {\n        key: 'getNotificationData_',\n        value: function getNotificationData_(msgPayload) {\n            if (!msgPayload) {\n                return;\n            }\n            if (_typeof(msgPayload.notification) !== 'object') {\n                return;\n            }\n            var notificationInformation = Object.assign({}, msgPayload.notification);\n            // Put the message payload under FCM_MSG name so we can identify the\n            // notification as being an FCM notification vs a notification from\n            // somewhere else (i.e. normal web push or developer generated\n            // notification).\n            notificationInformation['data'] = _defineProperty({}, FCM_MSG, msgPayload);\n            return notificationInformation;\n        }\n        /**\n         * Calling setBackgroundMessageHandler will opt in to some specific\n         * behaviours.\n         * 1.) If a notification doesn't need to be shown due to a window already\n         * being visible, then push messages will be sent to the page.\n         * 2.) If a notification needs to be shown, and the message contains no\n         * notification data this method will be called\n         * and the promise it returns will be passed to event.waitUntil.\n         * If you do not set this callback then all push messages will let and the\n         * developer can handle them in a their own 'push' event callback\n         * @export\n         * @param {function(Object)} callback The callback to be called when a push\n         * message is received and a notification must be shown. The callback will\n         * be given the data from the push message.\n         */\n\n    }, {\n        key: 'setBackgroundMessageHandler',\n        value: function setBackgroundMessageHandler(callback) {\n            if (callback && typeof callback !== 'function') {\n                throw this.errorFactory_.create(_errors2.default.codes.BG_HANDLER_FUNCTION_EXPECTED);\n            }\n            this.bgMessageHandler_ = callback;\n        }\n        /**\n         * @private\n         * @param {string} url The URL to look for when focusing a client.\n         * @return {Object} Returns an existing window client or a newly opened\n         * WindowClient.\n         */\n\n    }, {\n        key: 'getWindowClient_',\n        value: function getWindowClient_(url) {\n            // Use URL to normalize the URL when comparing to windowClients.\n            // This at least handles whether to include trailing slashes or not\n            var parsedURL = new URL(url).href;\n            return self.clients.matchAll({\n                type: 'window',\n                includeUncontrolled: true\n            }).then(function (clientList) {\n                var suitableClient = null;\n                for (var i = 0; i < clientList.length; i++) {\n                    var parsedClientUrl = new URL(clientList[i].url).href;\n                    if (parsedClientUrl === parsedURL) {\n                        suitableClient = clientList[i];\n                        break;\n                    }\n                }\n                if (suitableClient) {\n                    suitableClient.focus();\n                    return suitableClient;\n                }\n            });\n        }\n        /**\n         * This message will attempt to send the message to a window client.\n         * @private\n         * @param {Object} client The WindowClient to send the message to.\n         * @param {Object} message The message to send to the client.\n         * @returns {Promise} Returns a promise that resolves after sending the\n         * message. This does not guarantee that the message was successfully\n         * received.\n         */\n\n    }, {\n        key: 'attemptToMessageClient_',\n        value: function attemptToMessageClient_(client, message) {\n            var _this5 = this;\n\n            return new Promise(function (resolve, reject) {\n                if (!client) {\n                    return reject(_this5.errorFactory_.create(_errors2.default.codes.NO_WINDOW_CLIENT_TO_MSG));\n                }\n                client.postMessage(message);\n                resolve();\n            });\n        }\n        /**\n         * @private\n         * @returns {Promise<boolean>} If there is currently a visible WindowClient,\n         * this method will resolve to true, otherwise false.\n         */\n\n    }, {\n        key: 'hasVisibleClients_',\n        value: function hasVisibleClients_() {\n            return self.clients.matchAll({\n                type: 'window',\n                includeUncontrolled: true\n            }).then(function (clientList) {\n                return clientList.some(function (client) {\n                    return client.visibilityState === 'visible';\n                });\n            });\n        }\n        /**\n         * @private\n         * @param {Object} msgPayload The data from the push event that should be sent\n         * to all available pages.\n         * @returns {Promise} Returns a promise that resolves once the message\n         * has been sent to all WindowClients.\n         */\n\n    }, {\n        key: 'sendMessageToWindowClients_',\n        value: function sendMessageToWindowClients_(msgPayload) {\n            var _this6 = this;\n\n            return self.clients.matchAll({\n                type: 'window',\n                includeUncontrolled: true\n            }).then(function (clientList) {\n                var internalMsg = _workerPageMessage2.default.createNewMsg(_workerPageMessage2.default.TYPES_OF_MSG.PUSH_MSG_RECEIVED, msgPayload);\n                return Promise.all(clientList.map(function (client) {\n                    return _this6.attemptToMessageClient_(client, internalMsg);\n                }));\n            });\n        }\n        /**\n         * This will register the default service worker and return the registration.\n         * @private\n         * @return {Promise<!ServiceWorkerRegistration>} The service worker\n         * registration to be used for the push service.\n         */\n\n    }, {\n        key: 'getSWRegistration_',\n        value: function getSWRegistration_() {\n            return Promise.resolve(self.registration);\n        }\n    }]);\n\n    return SWController;\n}(_controllerInterface2.default);\n\nexports.default = SWController;\nmodule.exports = exports['default'];\n//# sourceMappingURL=sw-controller.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/firebase/messaging/controllers/sw-controller.js","/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _controllerInterface = require('./controller-interface');\n\nvar _controllerInterface2 = _interopRequireDefault(_controllerInterface);\n\nvar _errors = require('../models/errors');\n\nvar _errors2 = _interopRequireDefault(_errors);\n\nvar _workerPageMessage = require('../models/worker-page-message');\n\nvar _workerPageMessage2 = _interopRequireDefault(_workerPageMessage);\n\nvar _defaultSw = require('../models/default-sw');\n\nvar _defaultSw2 = _interopRequireDefault(_defaultSw);\n\nvar _notificationPermission = require('../models/notification-permission');\n\nvar _notificationPermission2 = _interopRequireDefault(_notificationPermission);\n\nvar _subscribe = require('../../app/subscribe');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar WindowController = function (_ControllerInterface) {\n    _inherits(WindowController, _ControllerInterface);\n\n    /**\n     * A service that provides a MessagingService instance.\n     * @param {!firebase.app.App} app\n     */\n    function WindowController(app) {\n        _classCallCheck(this, WindowController);\n\n        /**\n         * @private\n         * @type {ServiceWorkerRegistration}\n         */\n        var _this = _possibleConstructorReturn(this, (WindowController.__proto__ || Object.getPrototypeOf(WindowController)).call(this, app));\n\n        _this.registrationToUse_;\n        /**\n         * @private\n         * @type {Promise}\n         */\n        _this.manifestCheckPromise_;\n        /**\n         * @private\n         * @type {firebase.Observer}\n         */\n        _this.messageObserver_ = null;\n        /**\n         * @private {!firebase.Subscribe} The subscribe function to the onMessage\n         * observer.\n         */\n        _this.onMessage_ = (0, _subscribe.createSubscribe)(function (observer) {\n            _this.messageObserver_ = observer;\n        });\n        /**\n         * @private\n         * @type {firebase.Observer}\n         */\n        _this.tokenRefreshObserver_ = null;\n        _this.onTokenRefresh_ = (0, _subscribe.createSubscribe)(function (observer) {\n            _this.tokenRefreshObserver_ = observer;\n        });\n        _this.setupSWMessageListener_();\n        return _this;\n    }\n    /**\n     * This method returns an FCM token if it can be generated.\n     * The return promise will reject if the browser doesn't support\n     * FCM, if permission is denied for notifications or it's not\n     * possible to generate a token.\n     * @export\n     * @return {Promise<string> | Promise<null>} Returns a promise the\n     * resolves to an FCM token or null if permission isn't granted.\n     */\n\n\n    _createClass(WindowController, [{\n        key: 'getToken',\n        value: function getToken() {\n            var _this2 = this;\n\n            // Check that the required API's are available\n            if (!this.isSupported_()) {\n                return Promise.reject(this.errorFactory_.create(_errors2.default.codes.UNSUPPORTED_BROWSER));\n            }\n            return this.manifestCheck_().then(function () {\n                return _get(WindowController.prototype.__proto__ || Object.getPrototypeOf(WindowController.prototype), 'getToken', _this2).call(_this2);\n            });\n        }\n        /**\n         * The method checks that a manifest is defined and has the correct GCM\n         * sender ID.\n         * @private\n         * @return {Promise} Returns a promise that resolves if the manifest matches\n         * our required sender ID\n         */\n\n    }, {\n        key: 'manifestCheck_',\n        value: function manifestCheck_() {\n            var _this3 = this;\n\n            if (this.manifestCheckPromise_) {\n                return this.manifestCheckPromise_;\n            }\n            var manifestTag = document.querySelector('link[rel=\"manifest\"]');\n            if (!manifestTag) {\n                this.manifestCheckPromise_ = Promise.resolve();\n            } else {\n                this.manifestCheckPromise_ = fetch(manifestTag.href).then(function (response) {\n                    return response.json();\n                }).catch(function () {\n                    // If the download or parsing fails allow check.\n                    // We only want to error if we KNOW that the gcm_sender_id is incorrect.\n                    return Promise.resolve();\n                }).then(function (manifestContent) {\n                    if (!manifestContent) {\n                        return;\n                    }\n                    if (!manifestContent['gcm_sender_id']) {\n                        return;\n                    }\n                    if (manifestContent['gcm_sender_id'] !== '103953800507') {\n                        throw _this3.errorFactory_.create(_errors2.default.codes.INCORRECT_GCM_SENDER_ID);\n                    }\n                });\n            }\n            return this.manifestCheckPromise_;\n        }\n        /**\n         * Request permission if it is not currently granted\n         * @export\n         * @returns {Promise} Resolves if the permission was granted, otherwise\n         * rejects\n         */\n\n    }, {\n        key: 'requestPermission',\n        value: function requestPermission() {\n            var _this4 = this;\n\n            if (Notification.permission === _notificationPermission2.default.granted) {\n                return Promise.resolve();\n            }\n            return new Promise(function (resolve, reject) {\n                var managePermissionResult = function (result) {\n                    if (result === _notificationPermission2.default.granted) {\n                        return resolve();\n                    } else if (result === _notificationPermission2.default.denied) {\n                        return reject(_this4.errorFactory_.create(_errors2.default.codes.PERMISSION_BLOCKED));\n                    } else {\n                        return reject(_this4.errorFactory_.create(_errors2.default.codes.PERMISSION_DEFAULT));\n                    }\n                };\n                // The Notification.requestPermission API was changed to\n                // return a promise so now have to handle both in case\n                // browsers stop support callbacks for promised version\n                var permissionPromise = Notification.requestPermission(function (result) {\n                    if (permissionPromise) {\n                        // Let the promise manage this\n                        return;\n                    }\n                    managePermissionResult(result);\n                });\n                if (permissionPromise) {\n                    // Prefer the promise version as it's the future API.\n                    permissionPromise.then(managePermissionResult);\n                }\n            });\n        }\n        /**\n         * This method allows a developer to override the default service worker and\n         * instead use a custom service worker.\n         * @export\n         * @param {!ServiceWorkerRegistration} registration The service worker\n         * registration that should be used to receive the push messages.\n         */\n\n    }, {\n        key: 'useServiceWorker',\n        value: function useServiceWorker(registration) {\n            if (!(registration instanceof ServiceWorkerRegistration)) {\n                throw this.errorFactory_.create(_errors2.default.codes.SW_REGISTRATION_EXPECTED);\n            }\n            if (typeof this.registrationToUse_ !== 'undefined') {\n                throw this.errorFactory_.create(_errors2.default.codes.USE_SW_BEFORE_GET_TOKEN);\n            }\n            this.registrationToUse_ = registration;\n        }\n        /**\n         * @export\n         * @param {!firebase.Observer|function(*)} nextOrObserver An observer object\n         * or a function triggered on message.\n         * @param {function(!Error)=} optError Optional A function triggered on\n         * message error.\n         * @param {function()=} optCompleted Optional function triggered when the\n         * observer is removed.\n         * @return {!function()} The unsubscribe function for the observer.\n         */\n\n    }, {\n        key: 'onMessage',\n        value: function onMessage(nextOrObserver, optError, optCompleted) {\n            return this.onMessage_(nextOrObserver, optError, optCompleted);\n        }\n        /**\n         * @export\n         * @param {!firebase.Observer|function()} nextOrObserver An observer object\n         * or a function triggered on token refresh.\n         * @param {function(!Error)=} optError Optional A function\n         * triggered on token refresh error.\n         * @param {function()=} optCompleted Optional function triggered when the\n         * observer is removed.\n         * @return {!function()} The unsubscribe function for the observer.\n         */\n\n    }, {\n        key: 'onTokenRefresh',\n        value: function onTokenRefresh(nextOrObserver, optError, optCompleted) {\n            return this.onTokenRefresh_(nextOrObserver, optError, optCompleted);\n        }\n        /**\n         * Given a registration, wait for the service worker it relates to\n         * become activer\n         * @private\n         * @param  {ServiceWorkerRegistration} registration Registration to wait\n         * for service worker to become active\n         * @return {Promise<!ServiceWorkerRegistration>} Wait for service worker\n         * registration to become active\n         */\n\n    }, {\n        key: 'waitForRegistrationToActivate_',\n        value: function waitForRegistrationToActivate_(registration) {\n            var _this5 = this;\n\n            var serviceWorker = registration.installing || registration.waiting || registration.active;\n            return new Promise(function (resolve, reject) {\n                if (!serviceWorker) {\n                    // This is a rare scenario but has occured in firefox\n                    reject(_this5.errorFactory_.create(_errors2.default.codes.NO_SW_IN_REG));\n                    return;\n                }\n                // Because the Promise function is called on next tick there is a\n                // small chance that the worker became active or redundant already.\n                if (serviceWorker.state === 'activated') {\n                    resolve(registration);\n                    return;\n                }\n                if (serviceWorker.state === 'redundant') {\n                    reject(_this5.errorFactory_.create(_errors2.default.codes.SW_REG_REDUNDANT));\n                    return;\n                }\n                var stateChangeListener = function () {\n                    if (serviceWorker.state === 'activated') {\n                        resolve(registration);\n                    } else if (serviceWorker.state === 'redundant') {\n                        reject(_this5.errorFactory_.create(_errors2.default.codes.SW_REG_REDUNDANT));\n                    } else {\n                        // Return early and wait to next state change\n                        return;\n                    }\n                    serviceWorker.removeEventListener('statechange', stateChangeListener);\n                };\n                serviceWorker.addEventListener('statechange', stateChangeListener);\n            });\n        }\n        /**\n         * This will regiater the default service worker and return the registration\n         * @private\n         * @return {Promise<!ServiceWorkerRegistration>} The service worker\n         * registration to be used for the push service.\n         */\n\n    }, {\n        key: 'getSWRegistration_',\n        value: function getSWRegistration_() {\n            var _this6 = this;\n\n            if (this.registrationToUse_) {\n                return this.waitForRegistrationToActivate_(this.registrationToUse_);\n            }\n            // Make the registration null so we know useServiceWorker will not\n            // use a new service worker as registrationToUse_ is no longer undefined\n            this.registrationToUse_ = null;\n            return navigator.serviceWorker.register(_defaultSw2.default.path, {\n                scope: _defaultSw2.default.scope\n            }).catch(function (err) {\n                throw _this6.errorFactory_.create(_errors2.default.codes.FAILED_DEFAULT_REGISTRATION, {\n                    'browserErrorMessage': err.message\n                });\n            }).then(function (registration) {\n                return _this6.waitForRegistrationToActivate_(registration).then(function () {\n                    _this6.registrationToUse_ = registration;\n                    // We update after activation due to an issue with Firefox v49 where\n                    // a race condition occassionally causes the service work to not\n                    // install\n                    registration.update();\n                    return registration;\n                });\n            });\n        }\n        /**\n         * This method will set up a message listener to handle\n         * events from the service worker that should trigger\n         * events in the page.\n         *\n         * @private\n         */\n\n    }, {\n        key: 'setupSWMessageListener_',\n        value: function setupSWMessageListener_() {\n            var _this7 = this;\n\n            if (!('serviceWorker' in navigator)) {\n                return;\n            }\n            navigator.serviceWorker.addEventListener('message', function (event) {\n                if (!event.data || !event.data[_workerPageMessage2.default.PARAMS.TYPE_OF_MSG]) {\n                    // Not a message from FCM\n                    return;\n                }\n                var workerPageMessage = event.data;\n                switch (workerPageMessage[_workerPageMessage2.default.PARAMS.TYPE_OF_MSG]) {\n                    case _workerPageMessage2.default.TYPES_OF_MSG.PUSH_MSG_RECEIVED:\n                    case _workerPageMessage2.default.TYPES_OF_MSG.NOTIFICATION_CLICKED:\n                        var pushMessage = workerPageMessage[_workerPageMessage2.default.PARAMS.DATA];\n                        _this7.messageObserver_.next(pushMessage);\n                        break;\n                    default:\n                        // Noop.\n                        break;\n                }\n            }, false);\n        }\n        /**\n         * Checks to see if the required API's are valid or not.\n         * @private\n         * @return {boolean} Returns true if the desired APIs are available.\n         */\n\n    }, {\n        key: 'isSupported_',\n        value: function isSupported_() {\n            return 'serviceWorker' in navigator && 'PushManager' in window && 'Notification' in window && ServiceWorkerRegistration.prototype.hasOwnProperty('showNotification') && PushSubscription.prototype.hasOwnProperty('getKey');\n        }\n    }]);\n\n    return WindowController;\n}(_controllerInterface2.default);\n\nexports.default = WindowController;\nmodule.exports = exports['default'];\n//# sourceMappingURL=window-controller.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/firebase/messaging/controllers/window-controller.js","/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\nfunction toBase64(arrayBuffer) {\n    var uint8Version = new Uint8Array(arrayBuffer);\n    return window.btoa(String.fromCharCode.apply(null, uint8Version));\n}\n\nexports.default = function (arrayBuffer) {\n    var base64String = toBase64(arrayBuffer);\n    return base64String.replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=array-buffer-to-base64.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/firebase/messaging/helpers/array-buffer-to-base64.js","/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    path: '/firebase-messaging-sw.js',\n    scope: '/firebase-cloud-messaging-push-scope'\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=default-sw.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/firebase/messaging/models/default-sw.js","/*! @license Firebase v4.1.1\nBuild: rev-ca0d1df\nTerms: https://firebase.google.com/terms/ */\n\n/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _errors = require('../../app/errors');\n\nvar _errors2 = require('./errors');\n\nvar _errors3 = _interopRequireDefault(_errors2);\n\nvar _arrayBufferToBase = require('../helpers/array-buffer-to-base64');\n\nvar _arrayBufferToBase2 = _interopRequireDefault(_arrayBufferToBase);\n\nvar _fcmDetails = require('./fcm-details');\n\nvar _fcmDetails2 = _interopRequireDefault(_fcmDetails);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar FCM_TOKEN_DETAILS_DB = 'fcm_token_details_db';\nvar FCM_TOKEN_OBJ_STORE = 'fcm_token_object_Store';\nvar FCM_TOKEN_DETAILS_DB_VERSION = 1;\n\nvar TokenManager = function () {\n    function TokenManager() {\n        _classCallCheck(this, TokenManager);\n\n        this.errorFactory_ = new _errors.ErrorFactory('messaging', 'Messaging', _errors3.default.map);\n        this.openDbPromise_ = null;\n    }\n    /**\n     * Get the indexedDB as a promsie.\n     * @private\n     * @return {Promise<IDBDatabase>} The IndexedDB database\n     */\n\n\n    _createClass(TokenManager, [{\n        key: 'openDatabase_',\n        value: function openDatabase_() {\n            if (this.openDbPromise_) {\n                return this.openDbPromise_;\n            }\n            this.openDbPromise_ = new Promise(function (resolve, reject) {\n                var request = indexedDB.open(FCM_TOKEN_DETAILS_DB, FCM_TOKEN_DETAILS_DB_VERSION);\n                request.onerror = function (event) {\n                    reject(event.target.error);\n                };\n                request.onsuccess = function (event) {\n                    resolve(event.target.result);\n                };\n                request.onupgradeneeded = function (event) {\n                    var db = event.target.result;\n                    var objectStore = db.createObjectStore(FCM_TOKEN_OBJ_STORE, {\n                        keyPath: 'swScope'\n                    });\n                    // Make sure the sender ID can be searched\n                    objectStore.createIndex('fcmSenderId', 'fcmSenderId', {\n                        unique: false\n                    });\n                    objectStore.createIndex('fcmToken', 'fcmToken', {\n                        unique: true\n                    });\n                };\n            });\n            return this.openDbPromise_;\n        }\n        /**\n         * Close the currently open database.\n         * @return {Promise<?>} Returns the result of the promise chain.\n         */\n\n    }, {\n        key: 'closeDatabase',\n        value: function closeDatabase() {\n            var _this = this;\n\n            if (this.openDbPromise_) {\n                return this.openDbPromise_.then(function (db) {\n                    db.close();\n                    _this.openDbPromise_ = null;\n                });\n            }\n            return Promise.resolve();\n        }\n        /**\n         * Given a token, this method will look up the details in indexedDB.\n         * @public\n         * @param {string} fcmToken\n         * @return {Promise<Object>} The details associated with that token.\n         */\n\n    }, {\n        key: 'getTokenDetailsFromToken',\n        value: function getTokenDetailsFromToken(fcmToken) {\n            return this.openDatabase_().then(function (db) {\n                return new Promise(function (resolve, reject) {\n                    var transaction = db.transaction([FCM_TOKEN_OBJ_STORE]);\n                    var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);\n                    var index = objectStore.index('fcmToken');\n                    var request = index.get(fcmToken);\n                    request.onerror = function (event) {\n                        reject(event.target.error);\n                    };\n                    request.onsuccess = function (event) {\n                        resolve(event.target.result);\n                    };\n                });\n            });\n        }\n    }, {\n        key: 'getTokenDetailsFromSWScope_',\n        value: function getTokenDetailsFromSWScope_(swScope) {\n            return this.openDatabase_().then(function (db) {\n                return new Promise(function (resolve, reject) {\n                    var transaction = db.transaction([FCM_TOKEN_OBJ_STORE]);\n                    var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);\n                    var scopeRequest = objectStore.get(swScope);\n                    scopeRequest.onerror = function (event) {\n                        reject(event.target.error);\n                    };\n                    scopeRequest.onsuccess = function (event) {\n                        resolve(event.target.result);\n                    };\n                });\n            });\n        }\n    }, {\n        key: 'getAllTokenDetailsForSenderId_',\n        value: function getAllTokenDetailsForSenderId_(senderId) {\n            return this.openDatabase_().then(function (db) {\n                return new Promise(function (resolve, reject) {\n                    var transaction = db.transaction([FCM_TOKEN_OBJ_STORE]);\n                    var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);\n                    var senderIdTokens = [];\n                    var cursorRequest = objectStore.openCursor();\n                    cursorRequest.onerror = function (event) {\n                        reject(event.target.error);\n                    };\n                    cursorRequest.onsuccess = function (event) {\n                        var cursor = event.target.result;\n                        if (cursor) {\n                            if (cursor.value['fcmSenderId'] === senderId) {\n                                senderIdTokens.push(cursor.value);\n                            }\n                            cursor.continue();\n                        } else {\n                            resolve(senderIdTokens);\n                        }\n                    };\n                });\n            });\n        }\n        /**\n         * Given a PushSubscription and messagingSenderId, get an FCM token.\n         * @public\n         * @param  {string} senderId The 'messagingSenderId' to tie the token to.\n         * @param  {PushSubscription} subscription The PushSusbcription to \"federate\".\n         * @param  {string=} pushSet If defined this will swap the subscription for\n         * matching FCM token.\n         * @return {Promise<!Object>} Returns the FCM token to be used in place\n         * of the PushSubscription.\n         */\n\n    }, {\n        key: 'subscribeToFCM',\n        value: function subscribeToFCM(senderId, subscription, pushSet) {\n            var _this2 = this;\n\n            var p256dh = (0, _arrayBufferToBase2.default)(subscription['getKey']('p256dh'));\n            var auth = (0, _arrayBufferToBase2.default)(subscription['getKey']('auth'));\n            var fcmSubscribeBody = 'authorized_entity=' + senderId + '&' + ('endpoint=' + subscription.endpoint + '&') + ('encryption_key=' + p256dh + '&') + ('encryption_auth=' + auth);\n            if (pushSet) {\n                fcmSubscribeBody += '&pushSet=' + pushSet;\n            }\n            var headers = new Headers();\n            headers.append('Content-Type', 'application/x-www-form-urlencoded');\n            var subscribeOptions = {\n                method: 'POST',\n                headers: headers,\n                body: fcmSubscribeBody\n            };\n            return fetch(_fcmDetails2.default.ENDPOINT + '/fcm/connect/subscribe', subscribeOptions).then(function (response) {\n                return response.json();\n            }).then(function (response) {\n                var fcmTokenResponse = response;\n                if (fcmTokenResponse['error']) {\n                    var message = fcmTokenResponse['error']['message'];\n                    throw _this2.errorFactory_.create(_errors3.default.codes.TOKEN_SUBSCRIBE_FAILED, { 'message': message });\n                }\n                if (!fcmTokenResponse['token']) {\n                    throw _this2.errorFactory_.create(_errors3.default.codes.TOKEN_SUBSCRIBE_NO_TOKEN);\n                }\n                if (!fcmTokenResponse['pushSet']) {\n                    throw _this2.errorFactory_.create(_errors3.default.codes.TOKEN_SUBSCRIBE_NO_PUSH_SET);\n                }\n                return {\n                    'token': fcmTokenResponse['token'],\n                    'pushSet': fcmTokenResponse['pushSet']\n                };\n            });\n        }\n        /**\n         * Checks the that fields in the PushSubscription are equivalent to the\n         * details stores in the masterTokenDetails.\n         * @private\n         * @param  {PushSubscription} subscription The push subscription we expect\n         * the master token to match.\n         * @param  {Object}  masterTokenDetails The saved details we wish to compare\n         * with the PushSubscription\n         * @return {boolean} true if the subscription and token details are\n         * equivalent.\n         */\n\n    }, {\n        key: 'isSameSubscription_',\n        value: function isSameSubscription_(subscription, masterTokenDetails) {\n            // getKey() isn't defined in the PushSubscription externs file, hence\n            // subscription['getKey']('<key name>').\n            return subscription.endpoint === masterTokenDetails['endpoint'] && (0, _arrayBufferToBase2.default)(subscription['getKey']('auth')) === masterTokenDetails['auth'] && (0, _arrayBufferToBase2.default)(subscription['getKey']('p256dh')) === masterTokenDetails['p256dh'];\n        }\n        /**\n         * Save the details for the fcm token for re-use at a later date.\n         * @private\n         * @param  {string} senderId The 'messagingSenderId' used for this project\n         * @param  {ServiceWorkerRegistration} swRegistration The service worker\n         * used to subscribe the user for web push\n         * @param  {PushSubscription} subscription The push subscription passed to\n         * FCM for the current token.\n         * @param  {string} fcmToken The FCM token currently used on this\n         * device.\n         * @param  {string} fcmPushSet The FCM push tied to the fcm token.\n         * @return {Promise<void>}\n         */\n\n    }, {\n        key: 'saveTokenDetails_',\n        value: function saveTokenDetails_(senderId, swRegistration, subscription, fcmToken, fcmPushSet) {\n            var details = {\n                'swScope': swRegistration.scope,\n                'endpoint': subscription.endpoint,\n                'auth': (0, _arrayBufferToBase2.default)(subscription['getKey']('auth')),\n                'p256dh': (0, _arrayBufferToBase2.default)(subscription['getKey']('p256dh')),\n                'fcmToken': fcmToken,\n                'fcmPushSet': fcmPushSet,\n                'fcmSenderId': senderId\n            };\n            return this.openDatabase_().then(function (db) {\n                return new Promise(function (resolve, reject) {\n                    var transaction = db.transaction([FCM_TOKEN_OBJ_STORE], 'readwrite');\n                    var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);\n                    var request = objectStore.put(details);\n                    request.onerror = function (event) {\n                        reject(event.target.error);\n                    };\n                    request.onsuccess = function () {\n                        resolve();\n                    };\n                });\n            });\n        }\n        /**\n         * Returns the saved FCM Token if one is available and still valid,\n         * otherwise `null` is returned.\n         * @param {string} senderId This should be the sender ID associated with the\n         * FCM Token being retrieved.\n         * @param {ServiceWorkerRegistration} swRegistration Registration to be used\n         * to subscribe the user to push.\n         * @return {Promise<string> | Promise} Returns the saved FCM Token if\n         * avilable and valid.\n         * @export\n         */\n\n    }, {\n        key: 'getSavedToken',\n        value: function getSavedToken(senderId, swRegistration) {\n            var _this3 = this;\n\n            if (!(swRegistration instanceof ServiceWorkerRegistration)) {\n                return Promise.reject(this.errorFactory_.create(_errors3.default.codes.SW_REGISTRATION_EXPECTED));\n            }\n            if (typeof senderId !== 'string' || senderId.length === 0) {\n                return Promise.reject(this.errorFactory_.create(_errors3.default.codes.BAD_SENDER_ID));\n            }\n            return this.getAllTokenDetailsForSenderId_(senderId).then(function (allTokenDetails) {\n                if (allTokenDetails.length === 0) {\n                    return;\n                }\n                var index = allTokenDetails.findIndex(function (tokenDetails) {\n                    return swRegistration.scope === tokenDetails['swScope'] && senderId === tokenDetails['fcmSenderId'];\n                });\n                if (index === -1) {\n                    return;\n                }\n                return allTokenDetails[index];\n            }).then(function (tokenDetails) {\n                if (!tokenDetails) {\n                    return;\n                }\n                return swRegistration.pushManager.getSubscription().catch(function () {\n                    throw _this3.errorFactory_.create(_errors3.default.codes.GET_SUBSCRIPTION_FAILED);\n                }).then(function (subscription) {\n                    if (subscription && _this3.isSameSubscription_(subscription, tokenDetails)) {\n                        return tokenDetails['fcmToken'];\n                    }\n                });\n            });\n        }\n        /**\n         * Creates a new FCM token.\n         */\n\n    }, {\n        key: 'createToken',\n        value: function createToken(senderId, swRegistration) {\n            var _this4 = this;\n\n            if (typeof senderId !== 'string' || senderId.length === 0) {\n                return Promise.reject(this.errorFactory_.create(_errors3.default.codes.BAD_SENDER_ID));\n            }\n            if (!(swRegistration instanceof ServiceWorkerRegistration)) {\n                return Promise.reject(this.errorFactory_.create(_errors3.default.codes.SW_REGISTRATION_EXPECTED));\n            }\n            // Check for existing subscription first\n            var subscription = void 0;\n            var fcmTokenDetails = void 0;\n            return swRegistration.pushManager.getSubscription().then(function (subscription) {\n                if (subscription) {\n                    return subscription;\n                }\n                return swRegistration.pushManager.subscribe(_fcmDetails2.default.SUBSCRIPTION_OPTIONS);\n            }).then(function (sub) {\n                subscription = sub;\n                return _this4.subscribeToFCM(senderId, subscription);\n            }).then(function (tokenDetails) {\n                fcmTokenDetails = tokenDetails;\n                return _this4.saveTokenDetails_(senderId, swRegistration, subscription, fcmTokenDetails['token'], fcmTokenDetails['pushSet']);\n            }).then(function () {\n                return fcmTokenDetails['token'];\n            });\n        }\n        /**\n         * This method deletes details of the current FCM token.\n         * It's returning a promise in case we need to move to an async\n         * method for deleting at a later date.\n         * @param {string} token Token to be deleted\n         * @return {Promise<Object>} Resolves once the FCM token details have been\n         * deleted and returns the deleted details.\n         */\n\n    }, {\n        key: 'deleteToken',\n        value: function deleteToken(token) {\n            var _this5 = this;\n\n            if (typeof token !== 'string' || token.length === 0) {\n                return Promise.reject(this.errorFactory_.create(_errors3.default.codes.INVALID_DELETE_TOKEN));\n            }\n            return this.getTokenDetailsFromToken(token).then(function (details) {\n                if (!details) {\n                    throw _this5.errorFactory_.create(_errors3.default.codes.DELETE_TOKEN_NOT_FOUND);\n                }\n                return _this5.openDatabase_().then(function (db) {\n                    return new Promise(function (resolve, reject) {\n                        var transaction = db.transaction([FCM_TOKEN_OBJ_STORE], 'readwrite');\n                        var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);\n                        var request = objectStore.delete(details['swScope']);\n                        request.onerror = function (event) {\n                            reject(event.target.error);\n                        };\n                        request.onsuccess = function (event) {\n                            if (event.target.result === 0) {\n                                reject(_this5.errorFactory_.create(_errors3.default.codes.FAILED_TO_DELETE_TOKEN));\n                                return;\n                            }\n                            resolve(details);\n                        };\n                    });\n                });\n            });\n        }\n    }]);\n\n    return TokenManager;\n}();\n\nexports.default = TokenManager;\nmodule.exports = exports['default'];\n//# sourceMappingURL=token-manager.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/firebase/messaging/models/token-manager.js","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n// WEBPACK FOOTER //\n// ./~/process/browser.js","(function (root) {\n\n  // Store setTimeout reference so promise-polyfill will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var setTimeoutFunc = setTimeout;\n\n  function noop() {}\n  \n  // Polyfill for Function.prototype.bind\n  function bind(fn, thisArg) {\n    return function () {\n      fn.apply(thisArg, arguments);\n    };\n  }\n\n  function Promise(fn) {\n    if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new');\n    if (typeof fn !== 'function') throw new TypeError('not a function');\n    this._state = 0;\n    this._handled = false;\n    this._value = undefined;\n    this._deferreds = [];\n\n    doResolve(fn, this);\n  }\n\n  function handle(self, deferred) {\n    while (self._state === 3) {\n      self = self._value;\n    }\n    if (self._state === 0) {\n      self._deferreds.push(deferred);\n      return;\n    }\n    self._handled = true;\n    Promise._immediateFn(function () {\n      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n      if (cb === null) {\n        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n        return;\n      }\n      var ret;\n      try {\n        ret = cb(self._value);\n      } catch (e) {\n        reject(deferred.promise, e);\n        return;\n      }\n      resolve(deferred.promise, ret);\n    });\n  }\n\n  function resolve(self, newValue) {\n    try {\n      // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n      if (newValue === self) throw new TypeError('A promise cannot be resolved with itself.');\n      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n        var then = newValue.then;\n        if (newValue instanceof Promise) {\n          self._state = 3;\n          self._value = newValue;\n          finale(self);\n          return;\n        } else if (typeof then === 'function') {\n          doResolve(bind(then, newValue), self);\n          return;\n        }\n      }\n      self._state = 1;\n      self._value = newValue;\n      finale(self);\n    } catch (e) {\n      reject(self, e);\n    }\n  }\n\n  function reject(self, newValue) {\n    self._state = 2;\n    self._value = newValue;\n    finale(self);\n  }\n\n  function finale(self) {\n    if (self._state === 2 && self._deferreds.length === 0) {\n      Promise._immediateFn(function() {\n        if (!self._handled) {\n          Promise._unhandledRejectionFn(self._value);\n        }\n      });\n    }\n\n    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n      handle(self, self._deferreds[i]);\n    }\n    self._deferreds = null;\n  }\n\n  function Handler(onFulfilled, onRejected, promise) {\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n    this.promise = promise;\n  }\n\n  /**\n   * Take a potentially misbehaving resolver function and make sure\n   * onFulfilled and onRejected are only called once.\n   *\n   * Makes no guarantees about asynchrony.\n   */\n  function doResolve(fn, self) {\n    var done = false;\n    try {\n      fn(function (value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      }, function (reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      });\n    } catch (ex) {\n      if (done) return;\n      done = true;\n      reject(self, ex);\n    }\n  }\n\n  Promise.prototype['catch'] = function (onRejected) {\n    return this.then(null, onRejected);\n  };\n\n  Promise.prototype.then = function (onFulfilled, onRejected) {\n    var prom = new (this.constructor)(noop);\n\n    handle(this, new Handler(onFulfilled, onRejected, prom));\n    return prom;\n  };\n\n  Promise.all = function (arr) {\n    var args = Array.prototype.slice.call(arr);\n\n    return new Promise(function (resolve, reject) {\n      if (args.length === 0) return resolve([]);\n      var remaining = args.length;\n\n      function res(i, val) {\n        try {\n          if (val && (typeof val === 'object' || typeof val === 'function')) {\n            var then = val.then;\n            if (typeof then === 'function') {\n              then.call(val, function (val) {\n                res(i, val);\n              }, reject);\n              return;\n            }\n          }\n          args[i] = val;\n          if (--remaining === 0) {\n            resolve(args);\n          }\n        } catch (ex) {\n          reject(ex);\n        }\n      }\n\n      for (var i = 0; i < args.length; i++) {\n        res(i, args[i]);\n      }\n    });\n  };\n\n  Promise.resolve = function (value) {\n    if (value && typeof value === 'object' && value.constructor === Promise) {\n      return value;\n    }\n\n    return new Promise(function (resolve) {\n      resolve(value);\n    });\n  };\n\n  Promise.reject = function (value) {\n    return new Promise(function (resolve, reject) {\n      reject(value);\n    });\n  };\n\n  Promise.race = function (values) {\n    return new Promise(function (resolve, reject) {\n      for (var i = 0, len = values.length; i < len; i++) {\n        values[i].then(resolve, reject);\n      }\n    });\n  };\n\n  // Use polyfill for setImmediate for performance gains\n  Promise._immediateFn = (typeof setImmediate === 'function' && function (fn) { setImmediate(fn); }) ||\n    function (fn) {\n      setTimeoutFunc(fn, 0);\n    };\n\n  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n    if (typeof console !== 'undefined' && console) {\n      console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n    }\n  };\n\n  /**\n   * Set the immediate function to execute callbacks\n   * @param fn {function} Function to execute\n   * @deprecated\n   */\n  Promise._setImmediateFn = function _setImmediateFn(fn) {\n    Promise._immediateFn = fn;\n  };\n\n  /**\n   * Change the function to execute on unhandled rejection\n   * @param {function} fn Function to execute on unhandled rejection\n   * @deprecated\n   */\n  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n    Promise._unhandledRejectionFn = fn;\n  };\n  \n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = Promise;\n  } else if (!root.Promise) {\n    root.Promise = Promise;\n  }\n\n})(this);\n\n\n\n// WEBPACK FOOTER //\n// ./~/promise-polyfill/promise.js","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n\n\n// WEBPACK FOOTER //\n// ./~/setimmediate/setImmediate.js","var apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\nexports.setImmediate = setImmediate;\nexports.clearImmediate = clearImmediate;\n\n\n\n// WEBPACK FOOTER //\n// ./~/timers-browserify/main.js"],"sourceRoot":""}